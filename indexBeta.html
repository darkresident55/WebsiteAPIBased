<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Treron - Gaming Platform</title>
<link rel="icon" href="https://raw.githubusercontent.com/darkresident55/Public-Assets/main/Treron%20Logo.png" type="image/png">

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-storage-compat.js"></script>

<style>
:root {
    --primary-h: 250;
    --primary-s: 95%;
    --primary-l: 65%;
    --primary: var(--primary-h), var(--primary-s), var(--primary-l);
    
    --glass-bg: rgba(22, 25, 40, 0.4);
    --glass-border: rgba(255, 255, 255, 0.12);
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    
    --anim-fast: 0.2s;
    --anim-normal: 0.4s;
    --anim-slow: 0.6s;
    --anim-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    --anim-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

@keyframes gradient-flow {
    0% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
    25% { transform: translate(-40%, -60%) rotate(90deg) scale(1.1); }
    50% { transform: translate(-60%, -40%) rotate(180deg) scale(0.9); }
    75% { transform: translate(-40%, -30%) rotate(270deg) scale(1.05); }
    100% { transform: translate(-50%, -50%) rotate(360deg) scale(1); }
}

@keyframes gradient-secondary {
    0% { transform: translate(-50%, -50%) rotate(180deg) scale(0.8); }
    33% { transform: translate(-30%, -70%) rotate(270deg) scale(1.2); }
    66% { transform: translate(-70%, -30%) rotate(360deg) scale(0.7); }
    100% { transform: translate(-50%, -50%) rotate(540deg) scale(0.8); }
}

@keyframes float-gentle {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 20px hsla(var(--primary), 0.3); }
    50% { box-shadow: 0 0 40px hsla(var(--primary), 0.6); }
}

@keyframes slide-in-up {
    from { 
        opacity: 0; 
        transform: translateY(30px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

@keyframes slide-in-down {
    from { 
        opacity: 0; 
        transform: translateY(-30px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

@keyframes scale-in {
    from { 
        opacity: 0; 
        transform: scale(0.8); 
    }
    to { 
        opacity: 1; 
        transform: scale(1); 
    }
}

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(200%); }
}

@keyframes tab-slide {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
}

@keyframes announcement-pulse {
    0%, 100% { 
        box-shadow: 0 4px 20px rgba(255, 193, 7, 0.3);
        border-color: rgba(255, 193, 7, 0.6);
    }
    50% { 
        box-shadow: 0 6px 30px rgba(255, 193, 7, 0.5);
        border-color: rgba(255, 193, 7, 0.8);
    }
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    line-height: 1.6;
    background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
    color: #e2e8f0;
    text-align: center;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
}

.background-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    overflow: hidden;
}

.background-container::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 150vmax;
    height: 150vmax;
    background: radial-gradient(circle at 30% 30%, hsla(var(--primary), 0.4), transparent 40%);
    animation: gradient-flow 25s ease-in-out infinite;
    transform-origin: center;
}

.background-container::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120vmax;
    height: 120vmax;
    background: radial-gradient(circle at 70% 70%, hsl(180, 80%, 50%, 0.3), transparent 35%);
    animation: gradient-secondary 30s ease-in-out infinite reverse;
    transform-origin: center;
}

.particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
}

.particle {
    position: absolute;
    width: 2px;
    height: 2px;
    background: hsla(var(--primary), 0.4);
    border-radius: 50%;
    animation: float-gentle 8s ease-in-out infinite;
}

/* Announcement Banner */
.announcement-banner {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.486), rgba(255, 153, 0, 0.473));
    backdrop-filter: blur(15px);
    border-bottom: 2px solid rgba(255, 193, 7, 0.6);
    padding: 1rem 2rem;
    z-index: 200;
    animation: announcement-pulse 3s ease-in-out infinite;
    animation: slide-in-down 0.5s var(--anim-smooth);
    box-shadow: 0 4px 20px rgba(255, 193, 7, 0.3);
    opacity: 1;
    transition: opacity 0.3s ease;
}

.announcement-banner.hidden {
    opacity: 0;
    pointer-events: none;
}

.announcement-content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    color: #ffffff;
    font-weight: 600;
}

.announcement-icon {
    width: 24px;
    height: 24px;
    color: #d97706;
    flex-shrink: 0;
}

.announcement-text {
    flex: 1;
    font-size: 0.95rem;
    line-height: 1.5;
}

.announcement-title {
    font-size: 1.1rem;
    font-weight: 700;
    color: #d97706;
    margin-bottom: 0.25rem;
}

.discord-link {
    color: #5865f2;
    text-decoration: none;
    font-weight: 700;
    transition: all var(--anim-normal) ease;
}

.discord-link:hover {
    color: #4752c4;
    text-decoration: underline;
}

.announcement-close {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: #ffffff;
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--anim-normal) ease;
    flex-shrink: 0;
}

.announcement-close:hover {
    background: rgba(0, 0, 0, 0.2);
    transform: scale(1.1);
}

/* Header with Navigation */
.header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 100;
    background: rgba(22, 25, 40, 0.8);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    animation: slide-in-down 0.8s var(--anim-smooth);
    transition: top var(--anim-normal) ease;
}

.header.with-announcement {
    top: 80px;
}

.logo-container {
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all var(--anim-normal) var(--anim-smooth);
}

.logo-container:hover {
    transform: scale(1.05);
}

.logo {
    width: 32px;
    height: auto;
    filter: drop-shadow(0 4px 12px hsla(var(--primary), 0.6));
    transition: all var(--anim-normal) var(--anim-smooth);
}

.logo:hover {
    transform: scale(1.1) rotate(5deg);
    filter: drop-shadow(0 6px 20px hsla(var(--primary), 0.8));
}

.logo-text {
    font-size: 1.2rem;
    font-weight: 600;
    color: #f1f5f9;
    transition: color var(--anim-normal) var(--anim-smooth);
}

.logo-container:hover .logo-text {
    color: hsl(var(--primary));
}

/* Language Selector */
.language-selector {
    position: relative;
}

.language-button {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #e2e8f0;
    padding: 6px 10px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all var(--anim-normal) var(--anim-smooth);
    font-size: 0.8rem;
    font-weight: 600;
}

.language-button:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-1px);
}

.language-flag {
    width: 18px;
    height: 13px;
    object-fit: cover;
    border-radius: 2px;
}

.language-options {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 10px;
    padding: 6px 0;
    display: none;
    min-width: 140px;
    box-shadow: var(--glass-shadow);
    z-index: 1000;
}

.language-options.active {
    display: block;
}

.language-option {
    padding: 8px 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all var(--anim-normal) ease;
    font-size: 0.85rem;
}

.language-option:hover {
    background: hsla(var(--primary), 0.2);
}

/* Privacy Policy Link */
.privacy-link {
    position: fixed;
    bottom: 10px;
    left: 10px;
    z-index: 50;
    background: var(--glass-bg);
    backdrop-filter: blur(15px);
    border: 1px solid var(--glass-border);
    border-radius: 8px;
    padding: 8px 12px;
    color: #94a3b8;
    text-decoration: none;
    font-size: 0.8rem;
    transition: all var(--anim-normal) var(--anim-smooth);
    box-shadow: var(--glass-shadow);
}

.privacy-link:hover {
    color: hsl(var(--primary));
    background: rgba(255, 255, 255, 0.05);
    transform: translateY(-2px);
}

/* Main Content */
.main-content {
    margin-top: 80px;
    min-height: calc(100vh - 80px);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    text-align: center;
    padding-bottom: 120px; /* Space for floating menu */
    transition: margin-top var(--anim-normal) ease;
}

.main-content.with-announcement {
    margin-top: 160px;
    min-height: calc(100vh - 160px);
}

.content-section {
    display: none;
    width: 100%;
    max-width: 1200px;
    animation: slide-in-up 0.5s var(--anim-smooth);
}

.content-section.active {
    display: block;
}

/* Games Section */
.games-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 60vh;
}

.welcome-title {
    font-size: 3.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, hsl(var(--primary)), #fff, hsl(280, 80%, 70%));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 1rem;
}

.recommended-title {
    font-size: 1.3rem;
    color: #cbd5e1;
    margin-bottom: 2rem;
}

.games-card {
    max-width: 600px;
    background: var(--glass-bg);
    backdrop-filter: blur(25px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    padding: 3rem;
    box-shadow: var(--glass-shadow);
    position: relative;
    overflow: hidden;
}

.games-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    animation: shimmer 3s ease-in-out infinite;
    animation-delay: 2s;
}

.games-card-title {
    font-size: 2.2rem;
    font-weight: 600;
    color: hsl(var(--primary));
    margin-bottom: 1.5rem;
}

.games-card-description {
    font-size: 1.1rem;
    color: #94a3b8;
    line-height: 1.7;
    margin-bottom: 2rem;
}

.get-notified-btn {
    display: inline-block;
    padding: 14px 28px;
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(280, 80%, 60%));
    color: white;
    text-decoration: none;
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--anim-normal) var(--anim-bounce);
    box-shadow: 0 4px 15px hsla(var(--primary), 0.3);
}

.get-notified-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px hsla(var(--primary), 0.4);
}

/* Community Section */
.community-section {
    padding: 2rem;
}

.community-grid {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
    align-items: center;
}

.friends-sidebar {
    background: var(--glass-bg);
    backdrop-filter: blur(25px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    padding: 2rem;
    box-shadow: var(--glass-shadow);
    height: fit-content;
}

.friends-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.friends-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: hsl(var(--primary));
}

.add-friend-btn {
    background: hsla(var(--primary), 0.2);
    color: hsl(var(--primary));
    border: 1px solid hsla(var(--primary), 0.4);
    border-radius: 8px;
    padding: 6px 12px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all var(--anim-normal) ease;
}

.add-friend-btn:hover {
    background: hsla(var(--primary), 0.3);
    transform: translateY(-1px);
}

.friends-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.friend-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    transition: all var(--anim-normal) var(--anim-smooth);
    cursor: pointer;
}

.friend-item:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateX(3px);
}

.friend-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-h), var(--primary-s), calc(var(--primary-l) - 15%)));
    color: white;
    font-size: 0.8rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
}

.friend-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.friend-info {
    flex: 1;
}

.friend-name {
    font-size: 0.9rem;
    font-weight: 500;
    color: #f1f5f9;
    margin-bottom: 0.25rem;
}

.friend-status {
    font-size: 0.75rem;
    color: #64748b;
}

.friend-status.online {
    color: #10b981;
}

.community-main {
    background: var(--glass-bg);
    backdrop-filter: blur(25px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    padding: 2rem;
    box-shadow: var(--glass-shadow);
}

.community-tabs {
    display: flex;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 12px;
    padding: 4px;
    margin-bottom: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.community-tab {
    flex: 1;
    padding: 10px 14px;
    background: transparent;
    border: none;
    color: #94a3b8;
    font-size: 0.85rem;
    font-weight: 500;
    border-radius: 8px;
    cursor: pointer;
    transition: all var(--anim-normal) var(--anim-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.community-tab:hover {
    color: #f1f5f9;
    background: rgba(255, 255, 255, 0.05);
}

.community-tab.active {
    color: hsl(var(--primary));
    background: hsla(var(--primary), 0.15);
    border: 1px solid hsla(var(--primary), 0.3);
}

.community-tab-icon {
    width: 14px;
    height: 14px;
    stroke-width: 2;
    stroke: currentColor;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
}

.community-content {
    padding: 0;
}

.community-tab-panel {
    display: none;
    animation: tab-slide 0.3s var(--anim-smooth);
}

.community-tab-panel.active {
    display: block;
}

/* User Search and Results */
.user-search {
    margin-bottom: 2rem;
}

.search-container {
    position: relative;
    max-width: 400px;
    margin: 0 auto;
}

.search-input {
    width: 100%;
    padding: 12px 16px 12px 45px;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    color: #e2e8f0;
    font-size: 1rem;
    transition: all var(--anim-normal) var(--anim-smooth);
}

.search-input:focus {
    outline: none;
    border-color: hsla(var(--primary), 0.7);
    box-shadow: 0 0 0 3px hsla(var(--primary), 0.2);
}

.search-icon {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    color: #64748b;
}

.search-results {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.user-result {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.5rem;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    transition: all var(--anim-normal) var(--anim-smooth);
}

.user-result:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.user-result-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-h), var(--primary-s), calc(var(--primary-l) - 15%)));
    color: white;
    font-size: 1.2rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
}

.user-result-info {
    flex: 1;
}

.user-result-name {
    font-size: 1.1rem;
    font-weight: 600;
    color: #f1f5f9;
    margin-bottom: 0.25rem;
}

.user-result-email {
    font-size: 0.9rem;
    color: #94a3b8;
    margin-bottom: 0.5rem;
}

.user-result-actions {
    display: flex;
    gap: 0.5rem;
}

.action-btn {
    padding: 6px 12px;
    border: none;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--anim-normal) ease;
}

.friend-request-btn {
    background: hsla(var(--primary), 0.2);
    color: hsl(var(--primary));
    border: 1px solid hsla(var(--primary), 0.4);
}

.friend-request-btn:hover {
    background: hsla(var(--primary), 0.3);
    transform: translateY(-1px);
}

.view-profile-btn {
    background: rgba(255, 255, 255, 0.1);
    color: #f1f5f9;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.view-profile-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
}

.block-btn {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.block-btn:hover {
    background: rgba(239, 68, 68, 0.3);
    transform: translateY(-1px);
}

/* Friend Requests Section */
.friend-requests {
    margin-bottom: 2rem;
}

.friend-requests-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: hsl(var(--primary));
    margin-bottom: 1rem;
    text-align: left;
}

.friend-request-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    margin-bottom: 0.75rem;
}

.friend-request-info {
    flex: 1;
}

.friend-request-name {
    font-size: 1rem;
    font-weight: 500;
    color: #f1f5f9;
    margin-bottom: 0.25rem;
}

.friend-request-time {
    font-size: 0.8rem;
    color: #64748b;
}

.friend-request-actions {
    display: flex;
    gap: 0.5rem;
}

.accept-btn {
    background: rgba(16, 185, 129, 0.2);
    color: #10b981;
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.accept-btn:hover {
    background: rgba(16, 185, 129, 0.3);
}

.decline-btn {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.decline-btn:hover {
    background: rgba(239, 68, 68, 0.3);
}

/* Empty States */
.empty-state {
    text-align: center;
    padding: 4rem 2rem;
    color: #64748b;
}

.empty-icon {
    width: 64px;
    height: 64px;
    margin: 0 auto 1.5rem;
    color: #475569;
}

.empty-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: #94a3b8;
    margin-bottom: 0.75rem;
}

.empty-description {
    font-size: 1rem;
    color: #64748b;
    max-width: 400px;
    margin: 0 auto;
    line-height: 1.6;
}

/* Enhanced Menu Bar */
.menu-bar-container {
    position: fixed;
    bottom: 25px;
    left: 0;
    right: 0;
    z-index: 100;
    animation: slide-in-up 1s var(--anim-bounce);
    animation-delay: 1s;
    animation-fill-mode: both;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    padding: 0 1rem;
    pointer-events: none;
}

.menu-bar {
    padding: 10px;
    border-radius: 20px;
    background: var(--glass-bg);
    backdrop-filter: blur(20px) saturate(150%);
    -webkit-backdrop-filter: blur(20px) saturate(150%);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
    transition: all var(--anim-normal) var(--anim-smooth);
    position: relative;
    overflow: hidden;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    max-width: calc(100vw - 2rem);
    width: auto;
    pointer-events: auto;
}

.menu-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.05), transparent);
    opacity: 0;
    transition: opacity var(--anim-normal) ease;
}

.menu-bar:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.4);
}

.menu-bar:hover::before {
    opacity: 1;
}

.menu-list {
    display: flex;
    align-items: center;
    gap: 8px;
    list-style: none;
    position: relative;
    z-index: 2;
}

.menu-item {
    position: relative;
}

.menu-link-wrapper {
    display: block;
    border-radius: 14px;
    overflow: hidden;
    position: relative;
    transition: all var(--anim-normal) var(--anim-bounce);
}

.menu-link-front {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 18px;
    color: #94a3b8;
    transition: all var(--anim-normal) var(--anim-smooth);
    border-radius: 14px;
    text-decoration: none;
    position: relative;
    overflow: hidden;
}

.menu-link-front::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: hsla(var(--primary), 0.2);
    opacity: 0;
    transition: opacity var(--anim-normal) ease;
    border-radius: 14px;
}

.menu-link-wrapper:hover .menu-link-front {
    color: #f1f5f9;
    transform: translateY(-2px);
}

.menu-link-wrapper:hover .menu-link-front::before {
    opacity: 1;
}

.menu-link-wrapper:active {
    transform: scale(0.95);
}

.menu-icon {
    width: 22px;
    height: 22px;
    stroke-width: 2;
    stroke: currentColor;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
    transition: all var(--anim-normal) var(--anim-smooth);
}

.menu-link-wrapper:hover .menu-icon {
    transform: scale(1.1);
    filter: drop-shadow(0 2px 8px hsla(var(--primary), 0.5));
}

/* Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(10, 10, 15, 0.8);
    backdrop-filter: blur(12px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all var(--anim-normal) var(--anim-smooth);
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.modal {
    background: var(--glass-bg);
    backdrop-filter: blur(30px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    width: 100%;
    max-width: 900px;
    box-shadow: var(--glass-shadow);
    transform: scale(0.9) translateY(20px);
    opacity: 0;
    transition: all var(--anim-slow) var(--anim-bounce);
    padding: 1rem;
    color: #e2e8f0;
    position: relative;
    overflow: hidden;
}

.modal::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
}

.modal-overlay.active .modal {
    transform: scale(1) translateY(0);
    opacity: 1;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.modal-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin: 0;
    background: linear-gradient(135deg, hsl(var(--primary)), #fff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.modal-close {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: #94a3b8;
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--anim-normal) var(--anim-bounce);
}

.modal-close:hover {
    background: rgba(255, 255, 255, 0.2);
    color: #fff;
    transform: rotate(90deg);
}

.modal-subtitle {
    color: #94a3b8;
    margin: 0 0 1rem 0;
    font-size: 1rem;
}

.modal-link {
    color: hsl(var(--primary));
    cursor: pointer;
    font-weight: 500;
    transition: all var(--anim-normal) ease;
    margin-bottom: 2rem;
    display: block;
}

.modal-link:hover {
    text-decoration: underline;
    color: hsl(var(--primary-h), var(--primary-s), calc(var(--primary-l) + 10%));
}

.form-group {
    margin-bottom: 1.5rem;
}

.input-with-icon {
    position: relative;
}

.input-icon {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    color: #64748b;
    transition: all var(--anim-normal) ease;
    z-index: 2;
}

.input-with-icon input {
    width: 100%;
    padding: 14px 14px 14px 45px;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 10px;
    color: #e2e8f0;
    font-size: 1rem;
    transition: all var(--anim-normal) var(--anim-smooth);
    backdrop-filter: blur(5px);
}

.input-with-icon input:focus {
    outline: none;
    border-color: hsla(var(--primary), 0.7);
    box-shadow: 0 0 0 3px hsla(var(--primary), 0.2);
    background: rgba(0, 0, 0, 0.4);
}

.input-with-icon input:focus + .input-icon {
    color: hsl(var(--primary));
    transform: translateY(-50%) scale(1.1);
}

.primary-button {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-h), var(--primary-s), calc(var(--primary-l) - 15%)));
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--anim-normal) var(--anim-bounce);
    box-shadow: 0 4px 15px hsla(var(--primary), 0.3);
}

.primary-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px hsla(var(--primary), 0.4);
}

.google-button {
    width: 100%;
    padding: 14px;
    background: #ffffff;
    color: #1f2937;
    border: 1px solid #d1d5db;
    border-radius: 10px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--anim-normal) var(--anim-bounce);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-bottom: 1rem;
}

.google-button:hover {
    background: #f9fafb;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.google-icon {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
}

.auth-divider {
    display: flex;
    align-items: center;
    margin: 1.5rem 0;
    color: #64748b;
    font-size: 0.9rem;
}

.auth-divider::before,
.auth-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: rgba(255, 255, 255, 0.1);
}

.auth-divider span {
    padding: 0 1rem;
}

.form-options {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
}

.checkbox-wrapper {
    display: flex;
    align-items: center;
    gap: 6px;
    color: #94a3b8;
}

.form-link {
    color: #94a3b8;
    text-decoration: none;
    transition: all var(--anim-normal) ease;
}

.form-link:hover {
    color: hsl(var(--primary));
    text-decoration: underline;
}

.modal-footer {
    font-size: 0.8rem;
    color: #64748b;
    margin-top: 1.5rem;
    text-align: center;
    line-height: 1.5;
}

.modal-footer a {
    color: #94a3b8;
    text-decoration: none;
    transition: color var(--anim-normal) ease;
}

.modal-footer a:hover {
    text-decoration: underline;
    color: hsl(var(--primary));
}

.message {
    padding: 10px 14px;
    border-radius: 8px;
    margin-bottom: 1rem;
    font-size: 0.9rem;
    display: none;
}

.message.error {
    background: rgba(239, 68, 68, 0.15);
    color: #f87171;
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.message.success {
    background: rgba(16, 185, 129, 0.15);
    color: #34d399;
    border: 1px solid rgba(16, 185, 129, 0.3);
}

/* Enhanced Profile Modal with Sidebar Design */
.profile-modal {
    max-width: 900px;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    background: rgba(15, 18, 30, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.08);
    padding: 0;
}

.profile-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1rem 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.profile-modal-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: hsl(var(--primary));
    margin: 0;
}

.profile-modal-close {
    background: rgba(255, 255, 255, 0.05);
    border: none;
    color: #94a3b8;
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--anim-normal) var(--anim-bounce);
}

.profile-modal-close:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
}

.profile-modal-body {
    display: flex;
    flex: 1;
    overflow: hidden;
}

/* Profile Header Section */
.profile-header {
    padding: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    display: flex;
    gap: 1rem;
    background: rgba(0, 0, 0, 0.2);
    flex-direction: row;
    align-items: center;
}

.profile-avatar-large {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-h), var(--primary-s), calc(var(--primary-l) - 15%)));
    color: white;
    font-size: 2rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 20px hsla(var(--primary), 0.4);
    transition: all var(--anim-normal) var(--anim-smooth);
    overflow: hidden;
    flex-shrink: 0;
    flex-direction: row;
}

.profile-avatar-large img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.profile-user-info {
    flex: 0;
}

.profile-username {
    font-size: 1.5rem;
    font-weight: 400;
    color: #f1f5f9;
    margin-bottom: 0;
    display: flex;
    align-items: center;
    gap: 0;
    flex-direction: row;
}

.profile-email {
    font-size: 0.9rem;
    color: #64748b;
    margin: 0;
}

.username-edit-btn {
    background: hsla(var(--primary), 0.15);
    color: hsl(var(--primary));
    border: 1px solid hsla(var(--primary), 0.3);
    border-radius: 6px;
    padding: 6px 15px;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all var(--anim-normal) ease;
    font-weight: 500;
    margin-left: 1rem;
}

.username-edit-btn:hover {
    background: hsla(var(--primary), 0.25);
    transform: translateY(-1px);
}

/* Sidebar Navigation */
.profile-sidebar {
    width: 200px;
    background: rgba(0, 0, 0, 0.3);
    border-right: 1px solid rgba(255, 255, 255, 0.08);
    padding: 1.5rem 0;
    flex-shrink: 0;
}

.profile-nav {
    list-style: none;
    margin: 0;
    padding: 0;
}

.profile-nav-item {
    margin-bottom: 0.5rem;
}

.profile-nav-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1.5rem;
    color: #94a3b8;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
    transition: all var(--anim-normal) var(--anim-smooth);
    border-left: 3px solid transparent;
    position: relative;
}

.profile-nav-link:hover {
    color: #f1f5f9;
    background: rgba(255, 255, 255, 0.05);
}

.profile-nav-link.active {
    color: hsl(var(--primary));
    background: hsla(var(--primary), 0.1);
    border-left-color: hsl(var(--primary));
}

.profile-nav-icon {
    width: 16px;
    height: 16px;
    stroke-width: 2;
    stroke: currentColor;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
    flex-shrink: 0;
}

/* Main Content Area */
.profile-main {
    flex: 1;
    padding: 2rem;
    overflow-y: auto;
    background: rgba(0, 0, 0, 0.1);
}

.profile-section {
    margin-bottom: 2rem;
}

.profile-section-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: hsl(var(--primary));
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.profile-section-content {
    display: grid;
    gap: 1rem;
}

/* Content Cards */
.info-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    padding: 1.5rem;
    transition: all var(--anim-normal) var(--anim-smooth);
}

.info-card:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.12);
    transform: translateY(-2px);
}

.info-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0.75rem;
}

.info-card-title {
    font-size: 1rem;
    font-weight: 600;
    color: #f1f5f9;
    margin: 0;
}

.info-card-value {
    font-size: 0.9rem;
    color: #94a3b8;
    margin: 0;
}

.status-badge {
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-active {
    background: rgba(16, 185, 129, 0.2);
    color: #34d399;
    border: 1px solid rgba(16, 185, 129, 0.3);
}

/* Activity Summary */
.activity-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 1rem;
}

.activity-stat {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 8px;
    padding: 1rem;
    text-align: center;
    transition: all var(--anim-normal) ease;
}

.activity-stat:hover {
    background: rgba(0, 0, 0, 0.4);
    border-color: rgba(255, 255, 255, 0.12);
}

.activity-stat-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: hsl(var(--primary));
    margin-bottom: 0.25rem;
}

.activity-stat-label {
    font-size: 0.8rem;
    color: #94a3b8;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 500;
}

/* Logout Button */
.logout-section {
    margin-top: auto;
    padding: 1rem 2rem 2rem;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.logout-button {
    width: 100%;
    padding: 12px;
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--anim-normal) var(--anim-bounce);
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
}

.logout-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
}

/* Username Edit Modal */
.username-modal {
    max-width: 400px;
}

.username-input {
    width: 100%;
    padding: 12px 16px;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 8px;
    color: #e2e8f0;
    font-size: 1rem;
    transition: all var(--anim-normal) ease;
    margin-bottom: 1rem;
}

.username-input:focus {
    outline: none;
    border-color: hsla(var(--primary), 0.7);
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
}

.username-availability {
    font-size: 0.85rem;
    margin-bottom: 1rem;
    padding: 8px 12px;
    border-radius: 6px;
    display: none;
}

.username-availability.available {
    background: rgba(16, 185, 129, 0.15);
    color: #34d399;
    border: 1px solid rgba(16, 185, 129, 0.3);
    display: block;
}

.username-availability.taken {
    background: rgba(239, 68, 68, 0.15);
    color: #f87171;
    border: 1px solid rgba(239, 68, 68, 0.3);
    display: block;
}

.username-availability.checking {
    background: rgba(245, 158, 11, 0.15);
    color: #fbbf24;
    border: 1px solid rgba(245, 158, 11, 0.3);
    display: block;
}

/* Toast Notification */
.toast {
    position: fixed;
    bottom: 120px;
    left: 50%;
    transform: translateX(-50%) translateY(30px);
    opacity: 0;
    background: var(--glass-bg);
    backdrop-filter: blur(15px);
    border: 1px solid var(--glass-border);
    border-radius: 10px;
    padding: 12px 18px;
    color: #e2e8f0;
    font-size: 0.9rem;
    box-shadow: var(--glass-shadow);
    z-index: 1000;
    transition: all var(--anim-slow) var(--anim-bounce);
    display: flex;
    align-items: center;
    gap: 8px;
    max-width: 300px;
}

.toast.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}

.toast-icon {
    color: #10b981;
    flex-shrink: 0;
    width: 16px;
    height: 16px;
}

/* Footer */
footer {
    padding: 2rem;
    text-align: center;
    font-size: 0.85rem;
    color: #64748b;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    margin-top: auto;
}

/* Responsive Design */
@media (max-width: 768px) {
    .announcement-banner {
        padding: 0.75rem 1rem;
    }
    
    .announcement-content {
        flex-direction: column;
        gap: 0.75rem;
        text-align: left;
    }
    
    .announcement-text {
        font-size: 0.85rem;
    }
    
    .announcement-title {
        font-size: 1rem;
    }
    
    .header {
        padding: 1rem;
        flex-wrap: wrap;
        gap: 1rem;
    }
    
    .header.with-announcement {
        top: 120px;
    }
    
    .main-content.with-announcement {
        margin-top: 200px;
        min-height: calc(100vh - 200px);
    }
    
    .welcome-title {
        font-size: 2.5rem;
    }
    
    .games-card {
        padding: 2rem;
        margin: 0 1rem;
    }
    
    .games-card-title {
        font-size: 1.8rem;
    }
    
    .modal {
        margin: 1rem;
        max-width: calc(100vw - 2rem);
    }
    
    .community-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .friends-sidebar {
        order: 2;
    }
    
    .menu-bar-container {
        padding: 0 0.75rem;
    }

    .menu-bar {
        padding: 8px;
        max-width: calc(100vw - 1.5rem);
    }

    .menu-link-front {
        padding: 10px 14px;
    }

    .profile-modal {
        max-width: calc(100vw - 2rem);
        max-height: 85vh;
    }

    .profile-modal-body {
        flex-direction: column;
    }

    .profile-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        padding: 1rem 0;
    }

    .profile-nav {
        display: flex;
        overflow-x: auto;
        gap: 0.5rem;
        padding: 0 1rem;
    }

    .profile-nav-item {
        margin-bottom: 0;
        flex-shrink: 0;
    }

    .profile-nav-link {
        padding: 0.5rem 1rem;
        border-left: none;
        border-bottom: 2px solid transparent;
    }

    .profile-nav-link.active {
        border-bottom-color: hsl(var(--primary));
    }

    .profile-header {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
    }

    .activity-grid {
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    }

    .privacy-link {
        bottom: 60px;
        left: 50%;
        transform: translateX(-50%);
    }
}

@media (max-width: 480px) {
    .announcement-banner {
        padding: 0.5rem 0.75rem;
    }
    
    .announcement-text {
        font-size: 0.8rem;
    }
    
    .announcement-title {
        font-size: 0.9rem;
    }
    
    .header.with-announcement {
        top: 140px;
    }
    
    .main-content.with-announcement {
        margin-top: 220px;
        min-height: calc(100vh - 220px);
    }
    
    .welcome-title {
        font-size: 2rem;
    }
    
    .games-card {
        padding: 1.5rem;
    }
    
    .games-card-title {
        font-size: 1.5rem;
    }
    
    .games-card-description {
        font-size: 1rem;
    }
    
    .menu-bar-container {
        padding: 0 0.5rem;
        bottom: 20px;
    }

    .menu-bar {
        padding: 6px;
        max-width: calc(100vw - 1rem);
    }

    .menu-link-front span {
        display: none;
    }

    .menu-link-front {
        padding: 10px;
    }

    .menu-list {
        gap: 4px;
    }
    

    .profile-avatar-large {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }

    .profile-username {
        font-size: 1.2rem;
    }

    .profile-main {
        padding: 1rem;
    }

    .privacy-link {
        bottom: 70px;
        font-size: 0.75rem;
        padding: 6px 10px;
    }
}

/* Loading States */
.loading {
    position: relative;
    pointer-events: none;
}

.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid transparent;
    border-top: 2px solid currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

svg {
  display: inline-block;
  stroke: currentColor;
  stroke-width: 2;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
}

</style>
</head>
<body>

<div class="background-container"></div>

<div class="particles" id="particles"></div>

<!-- Announcement Banner -->
<div class="announcement-banner" id="announcement-banner">
    <div class="announcement-content">
        <svg class="announcement-icon" viewBox="0 0 24 24">
            <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/>
        </svg>
        <div class="announcement-text">
            <div class="announcement-title">Heads up!</div>
            We've got some big changes ahead, Treron Development is packing up and moving from sunny Florida to North Carolina! Starting September 16, 2025, our website will go down for some serious TLC while we relocate and give it a fresh redesign. It might be a while before we're back online, we're expecting to wrap up the relocation somewhere between August 13, 2030, and August 22, 2031, but we're not going anywhere! Hang out with us in the meantime on our official Discord: <a href="https://discord.gg/bhRB8m74gG" class="discord-link" target="_blank">https://discord.gg/bhRB8m74gG</a>
        </div>
        <button class="announcement-close" id="announcement-close" aria-label="Close announcement">
            <svg viewBox="0 0 24 24" width="16" height="16">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
        
    </div>
</div>

<!-- Privacy Policy Link -->
<a href="https://trerondevelopment.xyz/privacyandsafety" target="_blank" class="privacy-link" data-translate="privacy_policy">
    Privacy Policy
</a>

<!-- Header with Navigation -->
<header class="header" id="header">
    <div class="logo-container">
        <img src="https://raw.githubusercontent.com/darkresident55/Public-Assets/main/Treron%20Logo.png" alt="Treron Logo" class="logo">
        <span class="logo-text">Treron LLC</span>
    </div>

    <div class="language-selector">
        <button class="language-button" id="language-toggle">
            <img src="https://raw.githubusercontent.com/darkresident55/Public-Assets/main/flags/en.png" alt="English" class="language-flag" id="current-language-flag">
            <span id="current-language-name">EN</span>
        </button>
        <div class="language-options" id="language-options">
            <div class="language-option" data-lang="en">
                <img src="https://raw.githubusercontent.com/darkresident55/Public-Assets/main/flags/en.png" alt="English" class="language-flag">
                <span>English</span>
            </div>
            <div class="language-option" data-lang="ja">
                <img src="https://raw.githubusercontent.com/darkresident55/Public-Assets/main/flags/jp.png" alt="日本語" class="language-flag">
                <span>日本語</span>
            </div>
            <div class="language-option" data-lang="de">
                <img src="https://raw.githubusercontent.com/darkresident55/Public-Assets/main/flags/de.png" alt="Deutsch" class="language-flag">
                <span>Deutsch</span>
            </div>
            <div class="language-option" data-lang="es">
                <img src="https://raw.githubusercontent.com/darkresident55/Public-Assets/main/flags/es.png" alt="Español" class="language-flag">
                <span>Español</span>
            </div>
            <div class="language-option" data-lang="fr">
                <img src="https://raw.githubusercontent.com/darkresident55/Public-Assets/main/flags/fr.png" alt="Français" class="language-flag">
                <span>Français</span>
            </div>
        </div>
    </div>
</header>

<!-- Main Content -->
<main class="main-content" id="main-content">
    <!-- Games Section -->
    <section class="content-section active" id="games-section">
        <div class="games-section">
            <h1 class="welcome-title" id="welcome-title" data-translate="welcome_back">Welcome Back [Username]!</h1>
            <h2 class="recommended-title" data-translate="recommended_games">Recommended Games</h2>
            
            <div class="games-card">
                <h3 class="games-card-title" data-translate="games_coming_soon">Mods and Games are Coming Soon!</h3>
                <p class="games-card-description" data-translate="games_description">
                    We're working hard to bring you an incredible collection of games. Our platform 
                    will feature custom mods, community-created content, and exciting multiplayer 
                    experiences. Stay Tuned!
                </p>
                <button class="get-notified-btn" id="get-notified-btn" data-translate="get_notified">Get Notified</button>
            </div>
        </div>
    </section>

    <!-- Community Section -->
    <section class="content-section" id="community-section">
        <div class="community-section">
            <div class="community-grid">
                <aside class="friends-sidebar">
                    <div class="friends-header">
                        <h3 class="friends-title" data-translate="friends">Friends</h3>
                    </div>
                    
                    <div class="friends-list" id="friends-list">
                        <div class="empty-state">
                            <svg class="empty-icon" viewBox="0 0 24 24">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            <h4 class="empty-title" data-translate="no_friends_yet">No Friends Yet</h4>
                            <p class="empty-description" data-translate="add_friends_description">Add friends to see them here</p>
                        </div>
                    </div>
                </aside>

                <main class="community-main">
                    <div class="community-tabs">
                        <button class="community-tab active" data-tab="discover">
                            <svg class="community-tab-icon" viewBox="0 0 24 24">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="M21 21l-4.35-4.35"></path>
                            </svg>
                            <span data-translate="discover">Discover</span>
                        </button>
                        <button class="community-tab" data-tab="requests">
                            <svg class="community-tab-icon" viewBox="0 0 24 24">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            <span data-translate="requests">Requests</span>
                        </button>
                        <button class="community-tab" data-tab="blocked">
                            <svg class="community-tab-icon" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>
                            </svg>
                            <span data-translate="blocked">Blocked</span>
                        </button>
                    </div>

                    <div class="community-content">
                        <!-- Discover Users Panel -->
                        <div class="community-tab-panel active" id="discover-panel">
                            <div class="user-search">
                                <div class="search-container">
                                    <input type="text" class="search-input" id="user-search-input" data-translate-placeholder="search_users" placeholder="Search for users...">
                                    <svg class="search-icon" viewBox="0 0 24 24">
                                        <circle cx="11" cy="11" r="8"></circle>
                                        <path d="M21 21l-4.35-4.35"></path>
                                    </svg>
                                </div>
                            </div>
                            
                            <div class="search-results" id="search-results">
                                <div class="empty-state">
                                    <svg class="empty-icon" viewBox="0 0 24 24">
                                        <circle cx="11" cy="11" r="8"></circle>
                                        <path d="M21 21l-4.35-4.35"></path>
                                    </svg>
                                    <h4 class="empty-title" data-translate="search_for_users">Search for Users</h4>
                                    <p class="empty-description" data-translate="search_description">Use the search bar above to find other users on the Treron platform</p>
                                </div>
                            </div>
                        </div>

                        <!-- Friend Requests Panel -->
                        <div class="community-tab-panel" id="requests-panel">
                            <div class="friend-requests">
                                <h4 class="friend-requests-title" data-translate="incoming_requests">Incoming Requests</h4>
                                <div id="incoming-requests">
                                    <div class="empty-state">
                                        <svg class="empty-icon" viewBox="0 0 24 24">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="9" cy="7" r="4"></circle>
                                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                        </svg>
                                        <h4 class="empty-title" data-translate="no_friend_requests">No Friend Requests</h4>
                                        <p class="empty-description" data-translate="no_pending_requests">You don't have any pending friend requests</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="friend-requests">
                                <h4 class="friend-requests-title" data-translate="sent_requests">Sent Requests</h4>
                                <div id="sent-requests">
                                    <div class="empty-state">
                                        <svg class="empty-icon" viewBox="0 0 24 24">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="9" cy="7" r="4"></circle>
                                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                        </svg>
                                        <h4 class="empty-title" data-translate="no_sent_requests">No Sent Requests</h4>
                                        <p class="empty-description" data-translate="no_sent_requests_description">You haven't sent any friend requests</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Blocked Users Panel -->
                        <div class="community-tab-panel" id="blocked-panel">
                            <div id="blocked-users">
                                <div class="empty-state">
                                    <svg class="empty-icon" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>
                                    </svg>
                                    <h4 class="empty-title" data-translate="no_blocked_users">No Blocked Users</h4>
                                    <p class="empty-description" data-translate="no_blocked_description">You haven't blocked any users</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </section>

    <!-- Mods Section -->
    <section class="content-section" id="mods-section">
        <div class="games-section">
            <h1 class="welcome-title" data-translate="mods_extensions">Mods & Extensions</h1>
            <h2 class="recommended-title" data-translate="coming_soon">Coming Soon</h2>
            
            <div class="games-card">
                <h3 class="games-card-title" data-translate="mod_platform_coming">Mod Platform Coming Soon!</h3>
                <p class="games-card-description" data-translate="mod_description">
                    Create, share, and discover amazing mods for your favorite games. Our platform 
                    will support custom modifications, texture packs, and gameplay enhancements.
                </p>
                <button class="get-notified-btn" data-translate="get_notified">Get Notified</button>
            </div>
        </div>
    </section>

    <!-- Store Section -->
    <section class="content-section" id="store-section">
        <div class="games-section">
            <h1 class="welcome-title" data-translate="treron_store">Treron Store</h1>
            <h2 class="recommended-title" data-translate="digital_marketplace">Digital Marketplace</h2>
            
            <div class="games-card">
                <h3 class="games-card-title" data-translate="store_opening_soon">Store Opening Soon!</h3>
                <p class="games-card-description" data-translate="store_description">
                    Browse and purchase games, mods, and digital content. Support creators and 
                    discover new gaming experiences in our upcoming marketplace.
                </p>
                <button class="get-notified-btn" data-translate="get_notified">Get Notified</button>
            </div>
        </div>
    </section>

    <!-- Settings Section -->
    <section class="content-section" id="settings-section">
        <div class="games-section">
            <h1 class="welcome-title" data-translate="settings">Settings</h1>
            <h2 class="recommended-title" data-translate="customize_experience">Customize Your Experience</h2>
            
            <div class="games-card">
                <h3 class="games-card-title" data-translate="settings_panel_coming">Settings Panel Coming Soon!</h3>
                <p class="games-card-description" data-translate="settings_description">
                    Personalize your gaming experience with comprehensive settings. Manage your account, 
                    privacy preferences, display options, and notification settings all in one place.
                </p>
                <button class="get-notified-btn" data-translate="get_notified">Get Notified</button>
            </div>
        </div>
    </section>
</main>

<!-- Floating Menu Bar -->
<div class="menu-bar-container">
    <nav class="menu-bar">
        <ul class="menu-list">
            <li class="menu-item">
                <div class="menu-link-wrapper">
                    <a href="#" class="menu-link-front" data-tab="games">
                        <svg class="menu-icon" viewBox="0 0 24 24">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                        </svg>
                        <span data-translate="games">Games</span>
                    </a>
                </div>
            </li>
            <li class="menu-item">
                <div class="menu-link-wrapper">
                    <a href="#" class="menu-link-front" data-tab="community">
                        <svg class="menu-icon" viewBox="0 0 24 24">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        <span data-translate="community">Community</span>
                    </a>
                </div>
            </li>
            <li class="menu-item">
                <div class="menu-link-wrapper">
                    <a href="#" class="menu-link-front" data-tab="mods">
                        <svg class="menu-icon" viewBox="0 0 24 24">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                        </svg>
                        <span data-translate="mods">Mods</span>
                    </a>
                </div>
            </li>
            <li class="menu-item">
                <div class="menu-link-wrapper">
                    <a href="#" class="menu-link-front" data-tab="store">
                        <svg class="menu-icon" viewBox="0 0 24 24">
                            <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <path d="M16 10a4 4 0 0 1-8 0"></path>
                        </svg>
                        <span data-translate="store">Store</span>
                    </a>
                </div>
            </li>
            <li class="menu-item">
                <div class="menu-link-wrapper">
                    <a href="#" class="menu-link-front" id="profile-button">
                        <svg class="menu-icon" viewBox="0 0 24 24">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span data-translate="profile">Profile</span>
                    </a>
                </div>
            </li>
        </ul>
    </nav>
</div>

<!-- Login Modal -->
<div class="modal-overlay" id="login-modal">
    <div class="modal">
        <div id="login-view">
            <div class="modal-header">
                <h2 class="modal-title" data-translate="log_in">Log in</h2>
                <button class="modal-close" id="login-modal-close">
                    <svg viewBox="0 0 24 24" width="16" height="16">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div id="login-error" class="message error"></div>
            <p class="modal-subtitle" data-translate="enter_credentials">Enter your credentials to continue</p>
            <span class="modal-link" id="show-signup" data-translate="create_account">Create account</span>
            
            <button class="google-button" id="google-signin-btn">
                <svg class="google-icon" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                <span data-translate="continue_with_google">Continue with Google</span>
            </button>

            <div class="auth-divider">
                <span data-translate="or">or</span>
            </div>

            <form id="login-form">
                <div class="form-group">
                    <div class="input-with-icon">
                        <input type="email" id="email" data-translate-placeholder="username_or_email" placeholder="Username or Email" required>
                        <svg class="input-icon" viewBox="0 0 24 24">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                    </div>
                </div>
                <div class="form-group">
                    <div class="input-with-icon">
                        <input type="password" id="password" data-translate-placeholder="password" placeholder="Password" required>
                        <svg class="input-icon" viewBox="0 0 24 24">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </div>
                </div>
                <div class="form-options">
                    <label class="checkbox-wrapper">
                        <input type="checkbox" id="remember-me">
                        <span data-translate="remember_me">Remember me</span>
                    </label>
                    <a href="#" class="form-link" id="forgot-password" data-translate="forgot_password">Forgot Password?</a>
                </div>
                <button type="submit" class="primary-button">
                    <span data-translate="login">LOGIN</span>
                </button>
            </form>
            <div class="modal-footer">
                <p data-translate="login_agreement">By logging in, you agree to the <a href="https://trerondevelopment.xyz/privacyandsafety" target="_blank">Terms</a> and <a href="https://trerondevelopment.xyz/privacyandsafety" target="_blank">Privacy Policy</a>.</p>
            </div>
        </div>
        
        <div id="profile-view" style="display: none;">
            <div class="modal profile-modal">
                <div class="profile-modal-header">
                    <h2 class="profile-modal-title" data-translate="your_profile">Your Profile</h2>
                    <button class="profile-modal-close" id="profile-close">
                        <svg viewBox="0 0 24 24" width="16" height="16">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <!-- Profile Header -->
                <div class="profile-header">
                    <div class="profile-avatar-large" id="profile-avatar">G</div>
                    <div class="profile-user-info">
                        <div class="profile-username">
                            <span id="profile-display-name">Guest</span>
                            <button class="username-edit-btn" id="username-edit-btn" data-translate="edit">Edit</button>
                        </div>
                        <p class="profile-email" id="profile-email">guest@example.com</p>
                    </div>
                </div>

                <div class="profile-modal-body">
                    <!-- Sidebar Navigation -->
                    <div class="profile-sidebar">
                        <nav>
                            <ul class="profile-nav">
                                <li class="profile-nav-item">
                                    <a href="#" class="profile-nav-link active" data-tab="overview">
                                        <svg class="profile-nav-icon" viewBox="0 0 24 24">
                                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                                        </svg>
                                        <span data-translate="account_overview">Account Overview</span>
                                    </a>
                                </li>
                                <li class="profile-nav-item">
                                    <a href="#" class="profile-nav-link" data-tab="mods">
                                        <svg class="profile-nav-icon" viewBox="0 0 24 24">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                        </svg>
                                        <span data-translate="created_mods">Created Mods</span>
                                    </a>
                                </li>
                                <li class="profile-nav-item">
                                    <a href="#" class="profile-nav-link" data-tab="extensions">
                                        <svg class="profile-nav-icon" viewBox="0 0 24 24">
                                            <polyline points="16 18 22 12 16 6"></polyline>
                                            <polyline points="8 6 2 12 8 18"></polyline>
                                        </svg>
                                        <span data-translate="scl_extensions">SCL Extensions</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <!-- Main Content -->
                    <div class="profile-main">
                        <!-- Account Overview Panel -->
                        <div class="profile-tab-panel active" id="overview-panel">
                            <div class="profile-section">
                                <h3 class="profile-section-title" data-translate="account_information">Account Information</h3>
                                <div class="profile-section-content">
                                    <div class="info-card">
                                        <div class="info-card-header">
                                            <div>
                                                <h4 class="info-card-title" data-translate="member_since">Member Since</h4>
                                                <p class="info-card-value" id="member-since-date">Loading...</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="info-card">
                                        <div class="info-card-header">
                                            <div>
                                                <h4 class="info-card-title" data-translate="account_type">Account Type</h4>
                                                <p class="info-card-value" data-translate="free_account">Free Account</p>
                                            </div>
                                            <span class="status-badge status-active" data-translate="active">ACTIVE</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-section">
                                <h3 class="profile-section-title" data-translate="activity_summary">Activity Summary</h3>
                                <div class="activity-grid">
                                    <div class="activity-stat">
                                        <div class="activity-stat-number" id="mods-count">0</div>
                                        <div class="activity-stat-label" data-translate="mods">Mods</div>
                                    </div>
                                    <div class="activity-stat">
                                        <div class="activity-stat-number" id="extensions-count">0</div>
                                        <div class="activity-stat-label" data-translate="extensions">Extensions</div>
                                    </div>
                                    <div class="activity-stat">
                                        <div class="activity-stat-number" id="downloads-count">0</div>
                                        <div class="activity-stat-label" data-translate="downloads">Downloads</div>
                                    </div>
                                    <div class="activity-stat">
                                        <div class="activity-stat-number" id="friends-count">0</div>
                                        <div class="activity-stat-label" data-translate="friends">Friends</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Created Mods Panel -->
                        <div class="profile-tab-panel" id="mods-panel">
                            <div class="profile-section">
                                <h3 class="profile-section-title" data-translate="your_mods">Your Mods</h3>
                                <div class="empty-state">
                                    <svg class="empty-icon" viewBox="0 0 24 24">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14 2 14 8 20 8"></polyline>
                                    </svg>
                                    <h4 class="empty-title" data-translate="no_mods_created">No Mods Created Yet</h4>
                                    <p class="empty-description" data-translate="no_mods_description">You haven't created any mods yet. Start building something amazing!</p>
                                </div>
                            </div>
                        </div>

                        <!-- SCL Extensions Panel -->
                        <div class="profile-tab-panel" id="extensions-panel">
                            <div class="profile-section">
                                <h3 class="profile-section-title" data-translate="your_scl_extensions">Your SCL Extensions</h3>
                                <div class="empty-state">
                                    <svg class="empty-icon" viewBox="0 0 24 24">
                                        <polyline points="16 18 22 12 16 6"></polyline>
                                        <polyline points="8 6 2 12 8 18"></polyline>
                                    </svg>
                                    <h4 class="empty-title" data-translate="no_extensions_created">No Extensions Created Yet</h4>
                                    <p class="empty-description" data-translate="no_extensions_description">You haven't created any SCL extensions yet. Extend the platform's functionality!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Logout Section -->
                <div class="logout-section">
                    <button class="logout-button" id="logout-button" data-translate="log_out">Log out</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Signup Modal -->
<div class="modal-overlay" id="signup-modal">
    <div class="modal">
        <div class="modal-header">
            <h2 class="modal-title" data-translate="create_account">Create Account</h2>
            <button class="modal-close" id="signup-modal-close">
                <svg viewBox="0 0 24 24" width="16" height="16">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <div id="signup-error" class="message error"></div>
        <p class="modal-subtitle" data-translate="join_gaming_community">Join the gaming community</p>
        <span class="modal-link" id="show-login" data-translate="already_have_account">Already have an account?</span>
        
        <button class="google-button" id="google-signup-btn">
            <svg class="google-icon" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            <span data-translate="sign_up_with_google">Sign up with Google</span>
        </button>

        <div class="auth-divider">
            <span data-translate="or">or</span>
        </div>

        <form id="signup-form">
            <div class="form-group">
                <div class="input-with-icon">
                    <input type="email" id="signup-email" data-translate-placeholder="your_email" placeholder="Your email address" required>
                    <svg class="input-icon" viewBox="0 0 24 24">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                </div>
            </div>
            <div class="form-group">
                <div class="input-with-icon">
                    <input type="password" id="signup-password" data-translate-placeholder="create_password" placeholder="Create password (min 6 characters)" required minlength="6">
                    <svg class="input-icon" viewBox="0 0 24 24">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                </div>
            </div>
            <div class="form-group">
                <div class="input-with-icon">
                    <input type="password" id="confirm-password" data-translate-placeholder="confirm_password" placeholder="Confirm your password" required minlength="6">
                    <svg class="input-icon" viewBox="0 0 24 24">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                </div>
            </div>
            <button type="submit" class="primary-button">
                <span data-translate="sign_up">SIGN UP</span>
            </button>
        </form>
        <div class="modal-footer">
            <p data-translate="signup_agreement">By signing up, you agree to the <a href="https://trerondevelopment.xyz/privacyandsafety" target="_blank">Terms</a> and <a href="https://trerondevelopment.xyz/privacyandsafety" target="_blank">Privacy Policy</a>.</p>
        </div>
    </div>
</div>

<!-- Username Edit Modal -->
<div class="modal-overlay" id="username-modal">
    <div class="modal username-modal">
        <div class="modal-header">
            <h2 class="modal-title" data-translate="set_username">Set Username</h2>
            <button class="modal-close" id="username-modal-close">
                <svg viewBox="0 0 24 24" width="16" height="16">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <div id="username-error" class="message error"></div>
        <p class="modal-subtitle" data-translate="choose_username">Choose a unique username for your profile</p>
        <form id="username-form">
            <div class="form-group">
                <input type="text" id="username-input" class="username-input" data-translate-placeholder="enter_username" placeholder="Enter username" required minlength="3" maxlength="20">
                <div id="username-availability" class="username-availability"></div>
            </div>
            <button type="submit" class="primary-button" id="username-save-btn" disabled>
                <span data-translate="save_username">Save Username</span>
            </button>
        </form>
        <div class="modal-footer">
            <p data-translate="username_requirements">Username must be 3-20 characters long and contain only letters, numbers, and underscores.</p>
        </div>
    </div>
</div>

<!-- User Profile Modal -->
<div class="modal-overlay" id="profile-modal">
    <div class="modal" style="max-width: 600px;">
        <div class="modal-header">
            <h2 class="modal-title" id="profile-modal-title" data-translate="user_profile">User Profile</h2>
            <button class="modal-close" id="profile-modal-close">
                <svg viewBox="0 0 24 24" width="16" height="16">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        
        <div id="profile-content">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 2rem;">
                <div id="profile-modal-avatar" style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-h), var(--primary-s), calc(var(--primary-l) - 15%))); color: white; font-size: 2rem; font-weight: bold; display: flex; align-items: center; justify-content: center; overflow: hidden;">U</div>
                <div>
                    <h3 id="profile-modal-username" style="font-size: 1.5rem; font-weight: 600; color: #f1f5f9; margin-bottom: 0.5rem;">Username</h3>
                    <p id="profile-modal-email" style="color: #94a3b8; margin-bottom: 0.5rem;">email@example.com</p>
                    <p id="profile-modal-joined" style="color: #64748b; font-size: 0.9rem;" data-translate="joined">Joined: Loading...</p>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                <div style="text-align: center; padding: 1rem; background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 10px;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: hsl(var(--primary)); margin-bottom: 0.25rem;">0</div>
                    <div style="font-size: 0.8rem; color: #94a3b8;" data-translate="friends">Friends</div>
                </div>
                <div style="text-align: center; padding: 1rem; background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 10px;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: hsl(var(--primary)); margin-bottom: 0.25rem;">0</div>
                    <div style="font-size: 0.8rem; color: #94a3b8;" data-translate="games">Games</div>
                </div>
                <div style="text-align: center; padding: 1rem; background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 10px;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: hsl(var(--primary)); margin-bottom: 0.25rem;">0</div>
                    <div style="font-size: 0.8rem; color: #94a3b8;" data-translate="mods">Mods</div>
                </div>
            </div>
            
            <div id="profile-actions" style="display: flex; gap: 1rem; justify-content: center;">
                <!-- Action buttons will be inserted here -->
            </div>
        </div>
    </div>
</div>

<footer>
    <p>&copy; 2025 Treron Development LLC. All rights reserved.</p>
</footer>

<div class="toast" id="toast">
    <svg class="toast-icon" viewBox="0 0 24 24">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
    </svg>
    <span id="toast-message"></span>
</div>

<script>
// Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyAC01DxmHUGxXUzZvwodxyyIXa9X-JCIJI",
    authDomain: "recharge-api-data-get.firebaseapp.com",
    projectId: "recharge-api-data-get",
    storageBucket: "recharge-api-data-get.appspot.com",
    messagingSenderId: "714113841994", 
    appId: "1:714113841994:web:0297ad94dc14cb04b7c02a"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const storage = firebase.storage();

// Configure Google Auth Provider
const googleProvider = new firebase.auth.GoogleAuthProvider();
googleProvider.addScope('email');
googleProvider.addScope('profile');

// Translation System
const translations = {
    en: {
        privacy_policy: "Privacy Policy",
        welcome_back: "Welcome Back [Username]!",
        recommended_games: "Recommended Games",
        games_coming_soon: "Mods and Games are Coming Soon!",
        games_description: "We're working hard to bring you an incredible collection of games. Our platform will feature custom mods, community-created content, and exciting multiplayer experiences. Stay Tuned!",
        get_notified: "Get Notified",
        friends: "Friends",
        add_friend: "Add Friend",
        no_friends_yet: "No Friends Yet",
        add_friends_description: "Add friends to see them here",
        discover: "Discover",
        requests: "Requests",
        blocked: "Blocked",
        search_users: "Search for users...",
        search_for_users: "Search for Users",
        search_description: "Use the search bar above to find other users on the Treron platform",
        incoming_requests: "Incoming Requests",
        no_friend_requests: "No Friend Requests",
        no_pending_requests: "You don't have any pending friend requests",
        sent_requests: "Sent Requests",
        no_sent_requests: "No Sent Requests",
        no_sent_requests_description: "You haven't sent any friend requests",
        no_blocked_users: "No Blocked Users",
        no_blocked_description: "You haven't blocked any users",
        mods_extensions: "Mods & Extensions",
        coming_soon: "Coming Soon",
        mod_platform_coming: "Mod Platform Coming Soon!",
        mod_description: "Create, share, and discover amazing mods for your favorite games. Our platform will support custom modifications, texture packs, and gameplay enhancements.",
        treron_store: "Treron Store",
        digital_marketplace: "Digital Marketplace",
        store_opening_soon: "Store Opening Soon!",
        store_description: "Browse and purchase games, mods, and digital content. Support creators and discover new gaming experiences in our upcoming marketplace.",
        settings: "Settings",
        customize_experience: "Customize Your Experience",
        settings_panel_coming: "Settings Panel Coming Soon!",
        settings_description: "Personalize your gaming experience with comprehensive settings. Manage your account, privacy preferences, display options, and notification settings all in one place.",
        games: "Games",
        community: "Community",
        mods: "Mods",
        store: "Store",
        profile: "Profile",
        log_in: "Log in",
        enter_credentials: "Enter your credentials to continue",
        create_account: "Create account",
        continue_with_google: "Continue with Google",
        or: "or",
        username_or_email: "Username or Email",
        password: "Password",
        remember_me: "Remember me",
        forgot_password: "Forgot Password?",
        login: "LOGIN",
        login_agreement: "By logging in, you agree to the Terms and Privacy Policy.",
        your_profile: "Your Profile",
        edit: "Edit",
        account_overview: "Account Overview",
        created_mods: "Created Mods",
        scl_extensions: "SCL Extensions",
        account_information: "Account Information",
        member_since: "Member Since",
        account_type: "Account Type",
        free_account: "Free Account",
        active: "ACTIVE",
        activity_summary: "Activity Summary",
        extensions: "Extensions",
        downloads: "Downloads",
        your_mods: "Your Mods",
        no_mods_created: "No Mods Created Yet",
        no_mods_description: "You haven't created any mods yet. Start building something amazing!",
        your_scl_extensions: "Your SCL Extensions",
        no_extensions_created: "No Extensions Created Yet",
        no_extensions_description: "You haven't created any SCL extensions yet. Extend the platform's functionality!",
        log_out: "Log out",
        join_gaming_community: "Join the gaming community",
        already_have_account: "Already have an account?",
        sign_up_with_google: "Sign up with Google",
        your_email: "Your email address",
        create_password: "Create password (min 6 characters)",
        confirm_password: "Confirm your password",
        sign_up: "SIGN UP",
        signup_agreement: "By signing up, you agree to the Terms and Privacy Policy.",
        set_username: "Set Username",
        choose_username: "Choose a unique username for your profile",
        enter_username: "Enter username",
        save_username: "Save Username",
        username_requirements: "Username must be 3-20 characters long and contain only letters, numbers, and underscores.",
        user_profile: "User Profile",
        joined: "Joined:",
        language_changed: "Language changed to"
    },
    ja: {
        privacy_policy: "プライバシーポリシー",
        welcome_back: "おかえりなさい [Username]！",
        recommended_games: "おすすめゲーム",
        games_coming_soon: "MODとゲームが近日公開！",
        games_description: "素晴らしいゲームコレクションをお届けするため、懸命に取り組んでいます。当プラットフォームでは、カスタムMOD、コミュニティ作成コンテンツ、エキサイティングなマルチプレイヤー体験を提供予定です。お楽しみに！",
        get_notified: "通知を受け取る",
        friends: "フレンド",
        add_friend: "フレンド追加",
        no_friends_yet: "まだフレンドがいません",
        add_friends_description: "フレンドを追加してここに表示させましょう",
        discover: "発見",
        requests: "リクエスト",
        blocked: "ブロック済み",
        search_users: "ユーザーを検索...",
        search_for_users: "ユーザーを検索",
        search_description: "上の検索バーを使用してTreronプラットフォームの他のユーザーを見つけてください",
        incoming_requests: "受信リクエスト",
        no_friend_requests: "フレンドリクエストなし",
        no_pending_requests: "保留中のフレンドリクエストはありません",
        sent_requests: "送信済みリクエスト",
        no_sent_requests: "送信済みリクエストなし",
        no_sent_requests_description: "フレンドリクエストを送信していません",
        no_blocked_users: "ブロック済みユーザーなし",
        no_blocked_description: "ユーザーをブロックしていません",
        mods_extensions: "MOD & 拡張機能",
        coming_soon: "近日公開",
        mod_platform_coming: "MODプラットフォーム近日公開！",
        mod_description: "お気に入りのゲーム用の素晴らしいMODを作成、共有、発見しましょう。当プラットフォームでは、カスタム改造、テクスチャパック、ゲームプレイ強化をサポートします。",
        treron_store: "Treronストア",
        digital_marketplace: "デジタルマーケットプレイス",
        store_opening_soon: "ストア近日オープン！",
        store_description: "ゲーム、MOD、デジタルコンテンツを閲覧・購入しましょう。クリエイターをサポートし、今後のマーケットプレイスで新しいゲーム体験を発見してください。",
        settings: "設定",
        customize_experience: "体験をカスタマイズ",
        settings_panel_coming: "設定パネル近日公開！",
        settings_description: "包括的な設定でゲーム体験をパーソナライズしましょう。アカウント、プライバシー設定、表示オプション、通知設定をすべて一箇所で管理できます。",
        games: "ゲーム",
        community: "コミュニティ",
        mods: "MOD",
        store: "ストア",
        profile: "プロフィール",
        log_in: "ログイン",
        enter_credentials: "続行するには認証情報を入力してください",
        create_account: "アカウント作成",
        continue_with_google: "Googleで続行",
        or: "または",
        username_or_email: "ユーザー名またはメール",
        password: "パスワード",
        remember_me: "ログイン状態を保持",
        forgot_password: "パスワードを忘れた？",
        login: "ログイン",
        login_agreement: "ログインすることで、利用規約とプライバシーポリシーに同意したことになります。",
        your_profile: "あなたのプロフィール",
        edit: "編集",
        account_overview: "アカウント概要",
        created_mods: "作成したMOD",
        scl_extensions: "SCL拡張機能",
        account_information: "アカウント情報",
        member_since: "登録日",
        account_type: "アカウントタイプ",
        free_account: "無料アカウント",
        active: "アクティブ",
        activity_summary: "アクティビティ概要",
        extensions: "拡張機能",
        downloads: "ダウンロード",
        your_mods: "あなたのMOD",
        no_mods_created: "まだMODを作成していません",
        no_mods_description: "まだMODを作成していません。素晴らしいものを作り始めましょう！",
        your_scl_extensions: "あなたのSCL拡張機能",
        no_extensions_created: "まだ拡張機能を作成していません",
        no_extensions_description: "まだSCL拡張機能を作成していません。プラットフォームの機能を拡張しましょう！",
        log_out: "ログアウト",
        join_gaming_community: "ゲーミングコミュニティに参加",
        already_have_account: "すでにアカウントをお持ちですか？",
        sign_up_with_google: "Googleでサインアップ",
        your_email: "メールアドレス",
        create_password: "パスワードを作成（6文字以上）",
        confirm_password: "パスワードを確認",
        sign_up: "サインアップ",
        signup_agreement: "サインアップすることで、利用規約とプライバシーポリシーに同意したことになります。",
        set_username: "ユーザー名設定",
        choose_username: "プロフィール用のユニークなユーザー名を選択してください",
        enter_username: "ユーザー名を入力",
        save_username: "ユーザー名を保存",
        username_requirements: "ユーザー名は3-20文字で、文字、数字、アンダースコアのみ使用できます。",
        user_profile: "ユーザープロフィール",
        joined: "参加日:",
        language_changed: "言語が変更されました："
    },
    de: {
        privacy_policy: "Datenschutzrichtlinie",
        welcome_back: "Willkommen zurück [Username]!",
        recommended_games: "Empfohlene Spiele",
        games_coming_soon: "Mods und Spiele kommen bald!",
        games_description: "Wir arbeiten hart daran, Ihnen eine unglaubliche Sammlung von Spielen zu bringen. Unsere Plattform wird benutzerdefinierte Mods, von der Community erstellte Inhalte und aufregende Multiplayer-Erfahrungen bieten. Bleiben Sie dran!",
        get_notified: "Benachrichtigung erhalten",
        friends: "Freunde",
        add_friend: "Freund hinzufügen",
        no_friends_yet: "Noch keine Freunde",
        add_friends_description: "Fügen Sie Freunde hinzu, um sie hier zu sehen",
        discover: "Entdecken",
        requests: "Anfragen",
        blocked: "Blockiert",
        search_users: "Benutzer suchen...",
        search_for_users: "Benutzer suchen",
        search_description: "Verwenden Sie die Suchleiste oben, um andere Benutzer auf der Treron-Plattform zu finden",
        incoming_requests: "Eingehende Anfragen",
        no_friend_requests: "Keine Freundschaftsanfragen",
        no_pending_requests: "Sie haben keine ausstehenden Freundschaftsanfragen",
        sent_requests: "Gesendete Anfragen",
        no_sent_requests: "Keine gesendeten Anfragen",
        no_sent_requests_description: "Sie haben keine Freundschaftsanfragen gesendet",
        no_blocked_users: "Keine blockierten Benutzer",
        no_blocked_description: "Sie haben keine Benutzer blockiert",
        mods_extensions: "Mods & Erweiterungen",
        coming_soon: "Demnächst",
        mod_platform_coming: "Mod-Plattform kommt bald!",
        mod_description: "Erstellen, teilen und entdecken Sie erstaunliche Mods für Ihre Lieblingsspiele. Unsere Plattform wird benutzerdefinierte Modifikationen, Texturpakete und Gameplay-Verbesserungen unterstützen.",
        treron_store: "Treron Store",
        digital_marketplace: "Digitaler Marktplatz",
        store_opening_soon: "Store öffnet bald!",
        store_description: "Durchsuchen und kaufen Sie Spiele, Mods und digitale Inhalte. Unterstützen Sie Ersteller und entdecken Sie neue Gaming-Erfahrungen in unserem kommenden Marktplatz.",
        settings: "Einstellungen",
        customize_experience: "Passen Sie Ihr Erlebnis an",
        settings_panel_coming: "Einstellungsbereich kommt bald!",
        settings_description: "Personalisieren Sie Ihr Gaming-Erlebnis mit umfassenden Einstellungen. Verwalten Sie Ihr Konto, Datenschutzeinstellungen, Anzeigeoptionen und Benachrichtigungseinstellungen an einem Ort.",
        games: "Spiele",
        community: "Community",
        mods: "Mods",
        store: "Store",
        profile: "Profil",
        log_in: "Anmelden",
        enter_credentials: "Geben Sie Ihre Anmeldedaten ein, um fortzufahren",
        create_account: "Konto erstellen",
        continue_with_google: "Mit Google fortfahren",
        or: "oder",
        username_or_email: "Benutzername oder E-Mail",
        password: "Passwort",
        remember_me: "Angemeldet bleiben",
        forgot_password: "Passwort vergessen?",
        login: "ANMELDEN",
        login_agreement: "Durch die Anmeldung stimmen Sie den Nutzungsbedingungen und der Datenschutzrichtlinie zu.",
        your_profile: "Ihr Profil",
        edit: "Bearbeiten",
        account_overview: "Kontoübersicht",
        created_mods: "Erstellte Mods",
        scl_extensions: "SCL-Erweiterungen",
        account_information: "Kontoinformationen",
        member_since: "Mitglied seit",
        account_type: "Kostenloses Konto",
        free_account: "Kostenloses Konto",
        active: "AKTIV",
        activity_summary: "Aktivitätszusammenfassung",
        extensions: "Erweiterungen",
        downloads: "Downloads",
        your_mods: "Ihre Mods",
        no_mods_created: "Noch keine Mods erstellt",
        no_mods_description: "Sie haben noch keine Mods erstellt. Beginnen Sie, etwas Erstaunliches zu bauen!",
        your_scl_extensions: "Ihre SCL-Erweiterungen",
        no_extensions_created: "Noch keine Erweiterungen erstellt",
        no_extensions_description: "Sie haben noch keine SCL-Erweiterungen erstellt. Erweitern Sie die Funktionalität der Plattform!",
        log_out: "Abmelden",
        join_gaming_community: "Der Gaming-Community beitreten",
        already_have_account: "Haben Sie bereits ein Konto?",
        sign_up_with_google: "Mit Google registrieren",
        your_email: "Ihre E-Mail-Adresse",
        create_password: "Passwort erstellen (min. 6 Zeichen)",
        confirm_password: "Passwort bestätigen",
        sign_up: "REGISTRIEREN",
        signup_agreement: "Durch die Registrierung stimmen Sie den Nutzungsbedingungen und der Datenschutzrichtlinie zu.",
        set_username: "Benutzername festlegen",
        choose_username: "Wählen Sie einen eindeutigen Benutzernamen für Ihr Profil",
        enter_username: "Benutzername eingeben",
        save_username: "Benutzername speichern",
        username_requirements: "Der Benutzername muss 3-20 Zeichen lang sein und darf nur Buchstaben, Zahlen und Unterstriche enthalten.",
        user_profile: "Benutzerprofil",
        joined: "Beigetreten:",
        language_changed: "Sprache geändert zu"
    },
    es: {
        privacy_policy: "Política de Privacidad",
        welcome_back: "¡Bienvenido de vuelta [Username]!",
        recommended_games: "Juegos Recomendados",
        games_coming_soon: "¡Mods y Juegos Próximamente!",
        games_description: "Estamos trabajando duro para traerte una increíble colección de juegos. Nuestra plataforma contará con mods personalizados, contenido creado por la comunidad y emocionantes experiencias multijugador. ¡Mantente atento!",
        get_notified: "Recibir Notificaciones",
        friends: "Amigos",
        add_friend: "Agregar Amigo",
        no_friends_yet: "Aún No Tienes Amigos",
        add_friends_description: "Agrega amigos para verlos aquí",
        discover: "Descubrir",
        requests: "Solicitudes",
        blocked: "Bloqueados",
        search_users: "Buscar usuarios...",
        search_for_users: "Buscar Usuarios",
        search_description: "Usa la barra de búsqueda de arriba para encontrar otros usuarios en la plataforma Treron",
        incoming_requests: "Solicitudes Entrantes",
        no_friend_requests: "No Hay Solicitudes de Amistad",
        no_pending_requests: "No tienes solicitudes de amistad pendientes",
        sent_requests: "Solicitudes Enviadas",
        no_sent_requests: "No Hay Solicitudes Enviadas",
        no_sent_requests_description: "No has enviado ninguna solicitud de amistad",
        no_blocked_users: "No Hay Usuarios Bloqueados",
        no_blocked_description: "No has bloqueado a ningún usuario",
        mods_extensions: "Mods y Extensiones",
        coming_soon: "Próximamente",
        mod_platform_coming: "¡Plataforma de Mods Próximamente!",
        mod_description: "Crea, comparte y descubre mods increíbles para tus juegos favoritos. Nuestra plataforma soportará modificaciones personalizadas, paquetes de texturas y mejoras de jugabilidad.",
        treron_store: "Tienda Treron",
        digital_marketplace: "Mercado Digital",
        store_opening_soon: "¡Tienda Abriendo Pronto!",
        store_description: "Navega y compra juegos, mods y contenido digital. Apoya a los creadores y descubre nuevas experiencias de juego en nuestro próximo mercado.",
        settings: "Configuración",
        customize_experience: "Personaliza Tu Experiencia",
        settings_panel_coming: "¡Panel de Configuración Próximamente!",
        settings_description: "Personaliza tu experiencia de juego con configuraciones completas. Gestiona tu cuenta, preferencias de privacidad, opciones de visualización y configuraciones de notificaciones todo en un lugar.",
        games: "Juegos",
        community: "Comunidad",
        mods: "Mods",
        store: "Tienda",
        profile: "Perfil",
        log_in: "Iniciar Sesión",
        enter_credentials: "Ingresa tus credenciales para continuar",
        create_account: "Crear cuenta",
        continue_with_google: "Continuar con Google",
        or: "o",
        username_or_email: "Nombre de usuario o Email",
        password: "Contraseña",
        remember_me: "Recordarme",
        forgot_password: "¿Olvidaste tu contraseña?",
        login: "INICIAR SESIÓN",
        login_agreement: "Al iniciar sesión, aceptas los Términos y la Política de Privacidad.",
        your_profile: "Tu Perfil",
        edit: "Editar",
        account_overview: "Resumen de Cuenta",
        created_mods: "Mods Creados",
        scl_extensions: "Extensiones SCL",
        account_information: "Información de Cuenta",
        member_since: "Miembro Desde",
        account_type: "Tipo de Cuenta",
        free_account: "Cuenta Gratuita",
        active: "ACTIVO",
        activity_summary: "Resumen de Actividad",
        extensions: "Extensiones",
        downloads: "Descargas",
        your_mods: "Tus Mods",
        no_mods_created: "Aún No Has Creado Mods",
        no_mods_description: "Aún no has creado ningún mod. ¡Comienza a construir algo increíble!",
        your_scl_extensions: "Tus Extensiones SCL",
        no_extensions_created: "Aún No Has Creado Extensiones",
        no_extensions_description: "Aún no has creado ninguna extensión SCL. ¡Extiende la funcionalidad de la plataforma!",
        log_out: "Cerrar Sesión",
        join_gaming_community: "Únete a la comunidad gamer",
        already_have_account: "¿Ya tienes una cuenta?",
        sign_up_with_google: "Registrarse con Google",
        your_email: "Tu dirección de email",
        create_password: "Crear contraseña (mín. 6 caracteres)",
        confirm_password: "Confirmar contraseña",
        sign_up: "REGISTRARSE",
        signup_agreement: "Al registrarte, aceptas los Términos y la Política de Privacidad.",
        set_username: "Establecer Nombre de Usuario",
        choose_username: "Elige un nombre de usuario único para tu perfil",
        enter_username: "Ingresa nombre de usuario",
        save_username: "Guardar Nombre de Usuario",
        username_requirements: "El nombre de usuario debe tener 3-20 caracteres y contener solo letras, números y guiones bajos.",
        user_profile: "Perfil de Usuario",
        joined: "Se unió:",
        language_changed: "Idioma cambiado a"
    },
    fr: {
        privacy_policy: "Politique de Confidentialité",
        welcome_back: "Bon retour [Username] !",
        recommended_games: "Jeux Recommandés",
        games_coming_soon: "Mods et Jeux Bientôt Disponibles !",
        games_description: "Nous travaillons dur pour vous apporter une incroyable collection de jeux. Notre plateforme proposera des mods personnalisés, du contenu créé par la communauté et des expériences multijoueurs passionnantes. Restez à l'écoute !",
        get_notified: "Être Notifié",
        friends: "Amis",
        add_friend: "Ajouter un Ami",
        no_friends_yet: "Pas Encore d'Amis",
        add_friends_description: "Ajoutez des amis pour les voir ici",
        discover: "Découvrir",
        requests: "Demandes",
        blocked: "Bloqués",
        search_users: "Rechercher des utilisateurs...",
        search_for_users: "Rechercher des Utilisateurs",
        search_description: "Utilisez la barre de recherche ci-dessus pour trouver d'autres utilisateurs sur la plateforme Treron",
        incoming_requests: "Demandes Reçues",
        no_friend_requests: "Aucune Demande d'Ami",
        no_pending_requests: "Vous n'avez aucune demande d'ami en attente",
        sent_requests: "Demandes Envoyées",
        no_sent_requests: "Aucune Demande Envoyée",
        no_sent_requests_description: "Vous n'avez envoyé aucune demande d'ami",
        no_blocked_users: "Aucun Utilisateur Bloqué",
        no_blocked_description: "Vous n'avez bloqué aucun utilisateur",
        mods_extensions: "Mods et Extensions",
        coming_soon: "Bientôt Disponible",
        mod_platform_coming: "Plateforme de Mods Bientôt Disponible !",
        mod_description: "Créez, partagez et découvrez des mods incroyables pour vos jeux préférés. Notre plateforme supportera les modifications personnalisées, les packs de textures et les améliorations de gameplay.",
        treron_store: "Boutique Treron",
        digital_marketplace: "Marché Numérique",
        store_opening_soon: "Boutique Bientôt Ouverte !",
        store_description: "Parcourez et achetez des jeux, mods et contenu numérique. Soutenez les créateurs et découvrez de nouvelles expériences de jeu dans notre prochain marché.",
        settings: "Paramètres",
        customize_experience: "Personnalisez Votre Expérience",
        settings_panel_coming: "Panneau de Paramètres Bientôt Disponible !",
        settings_description: "Personnalisez votre expérience de jeu avec des paramètres complets. Gérez votre compte, préférences de confidentialité, options d'affichage et paramètres de notification en un seul endroit.",
        games: "Jeux",
        community: "Communauté",
        mods: "Mods",
        store: "Boutique",
        profile: "Profil",
        log_in: "Se Connecter",
        enter_credentials: "Entrez vos identifiants pour continuer",
        create_account: "Créer un compte",
        continue_with_google: "Continuer avec Google",
        or: "ou",
        username_or_email: "Nom d'utilisateur ou Email",
        password: "Mot de passe",
        remember_me: "Se souvenir de moi",
        forgot_password: "Mot de passe oublié ?",
        login: "CONNEXION",
        login_agreement: "En vous connectant, vous acceptez les Conditions et la Politique de Confidentialité.",
        your_profile: "Votre Profil",
        edit: "Modifier",
        account_overview: "Aperçu du Compte",
        created_mods: "Mods Créés",
        scl_extensions: "Extensions SCL",
        account_information: "Informations du Compte",
        member_since: "Membre Depuis",
        account_type: "Type de Compte",
        free_account: "Compte Gratuit",
        active: "ACTIF",
        activity_summary: "Résumé d'Activité",
        extensions: "Extensions",
        downloads: "Téléchargements",
        your_mods: "Vos Mods",
        no_mods_created: "Aucun Mod Créé",
        no_mods_description: "Vous n'avez encore créé aucun mod. Commencez à construire quelque chose d'incroyable !",
        your_scl_extensions: "Vos Extensions SCL",
        no_extensions_created: "Aucune Extension Créée",
        no_extensions_description: "Vous n'avez encore créé aucune extension SCL. Étendez les fonctionnalités de la plateforme !",
        log_out: "Se Déconnecter",
        join_gaming_community: "Rejoindre la communauté gaming",
        already_have_account: "Vous avez déjà un compte ?",
        sign_up_with_google: "S'inscrire avec Google",
        your_email: "Votre adresse email",
        create_password: "Créer un mot de passe (min. 6 caractères)",
        confirm_password: "Confirmer le mot de passe",
        sign_up: "S'INSCRIRE",
        signup_agreement: "En vous inscrivant, vous acceptez les Conditions et la Politique de Confidentialité.",
        set_username: "Définir le Nom d'Utilisateur",
        choose_username: "Choisissez un nom d'utilisateur unique pour votre profil",
        enter_username: "Entrez le nom d'utilisateur",
        save_username: "Sauvegarder le Nom d'Utilisateur",
        username_requirements: "Le nom d'utilisateur doit contenir 3-20 caractères et ne peut contenir que des lettres, chiffres et traits de soulignement.",
        user_profile: "Profil Utilisateur",
        joined: "Rejoint :",
        language_changed: "Langue changée en"
    }
};

let currentLanguage = 'en';

// Translation function
function translateText(key, language = currentLanguage) {
    return translations[language]?.[key] || translations['en'][key] || key;
}

// Apply translations to the page
function applyTranslations(language = currentLanguage) {
    // Translate elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        const translatedText = translateText(key, language);
        
        // Handle special cases for welcome message
        if (key === 'welcome_back') {
            const currentUser = auth.currentUser;
            if (currentUser) {
                // Keep the existing username replacement logic
                const currentText = element.textContent;
                const usernameMatch = currentText.match(/\[(.*?)\]/);
                if (usernameMatch) {
                    element.textContent = translatedText.replace('[Username]', usernameMatch[1]);
                } else {
                    element.textContent = translatedText;
                }
            } else {
                element.textContent = translatedText;
            }
        } else {
            element.textContent = translatedText;
        }
    });
    
    // Translate placeholders
    document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        element.placeholder = translateText(key, language);
    });
    
    // Update document title
    document.title = `Treron - ${translateText('games', language)}`;
}

// Helper function to format dates
function formatDate(dateString) {
    if (!dateString) return 'Unknown';
    
    try {
        const date = new Date(dateString);
        if (isNaN(date.getTime())) return 'Unknown';
        
        return date.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
    } catch (error) {
        console.error('Error formatting date:', error);
        return 'Unknown';
    }
}

// Username Management System
class UsernameManager {
    constructor() {
        this.storageRef = storage.ref('Usernames');
    }

    generateFilename(email) {
        return btoa(email).replace(/[^a-zA-Z0-9]/g, '') + '.json';
    }

    async searchUsers(query) {
        try {
            const listResult = await this.storageRef.listAll();
            const searchResults = [];
            
            for (const item of listResult.items) {
                try {
                    const url = await item.getDownloadURL();
                    const response = await fetch(url);
                    const data = await response.json();
                    
                    if (data.username && data.username.toLowerCase().includes(query.toLowerCase())) {
                        searchResults.push({
                            username: data.username,
                            email: data.email,
                            createdAt: data.createdAt,
                            updatedAt: data.updatedAt
                        });
                    }
                } catch (error) {
                    console.warn('Error reading file:', item.name, error);
                }
            }
            
            return searchResults;
        } catch (error) {
            console.error('Error searching users:', error);
            throw error;
        }
    }

    async getUsername(email) {
        try {
            const filename = this.generateFilename(email);
            const fileRef = this.storageRef.child(filename);
            
            const url = await fileRef.getDownloadURL();
            const response = await fetch(url);
            const data = await response.json();
            
            return data.username || null;
        } catch (error) {
            if (error.code === 'storage/object-not-found') {
                return null;
            }
            console.error('Error getting username:', error);
            throw error;
        }
    }

    async getUserData(email) {
        try {
            const filename = this.generateFilename(email);
            const fileRef = this.storageRef.child(filename);
            
            const url = await fileRef.getDownloadURL();
            const response = await fetch(url);
            const data = await response.json();
            
            return data;
        } catch (error) {
            if (error.code === 'storage/object-not-found') {
                return null;
            }
            console.error('Error getting user data:', error);
            throw error;
        }
    }

    async saveUsername(email, username) {
        try {
            const filename = this.generateFilename(email);
            const fileRef = this.storageRef.child(filename);
            
            const userData = {
                email: email,
                username: username,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(userData, null, 2)], {
                type: 'application/json'
            });
            
            await fileRef.put(blob);
            return true;
        } catch (error) {
            console.error('Error saving username:', error);
            throw error;
        }
    }

    async checkUsernameAvailability(username) {
        try {
            const listResult = await this.storageRef.listAll();
            
            for (const item of listResult.items) {
                try {
                    const url = await item.getDownloadURL();
                    const response = await fetch(url);
                    const data = await response.json();
                    
                    if (data.username && data.username.toLowerCase() === username.toLowerCase()) {
                        return false; // Username is taken
                    }
                } catch (error) {
                    console.warn('Error checking file:', item.name, error);
                }
            }
            
            return true; // Username is available
        } catch (error) {
            console.error('Error checking username availability:', error);
            throw error;
        }
    }

    async updateUsername(email, newUsername) {
        try {
            const filename = this.generateFilename(email);
            const fileRef = this.storageRef.child(filename);
            
            // Get existing data
            let existingData = {};
            try {
                const url = await fileRef.getDownloadURL();
                const response = await fetch(url);
                existingData = await response.json();
            } catch (error) {
                // File doesn't exist, create new
            }
            
            const userData = {
                ...existingData,
                email: email,
                username: newUsername,
                updatedAt: new Date().toISOString(),
                createdAt: existingData.createdAt || new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(userData, null, 2)], {
                type: 'application/json'
            });
            
            await fileRef.put(blob);
            return true;
        } catch (error) {
            console.error('Error updating username:', error);
            throw error;
        }
    }
}

// Friend Management System
class FriendManager {
    constructor() {
        this.storageRef = storage.ref('Friends');
    }

    generateFilename(email) {
        return btoa(email).replace(/[^a-zA-Z0-9]/g, '') + '_friends.json';
    }

    async getFriendData(email) {
        try {
            const filename = this.generateFilename(email);
            const fileRef = this.storageRef.child(filename);
            
            const url = await fileRef.getDownloadURL();
            const response = await fetch(url);
            const data = await response.json();
            
            return data;
        } catch (error) {
            if (error.code === 'storage/object-not-found' || error.code === 'storage/unauthorized') {
                // Create default friend data structure for new users
                const defaultData = {
                    email: email,
                    friends: [],
                    friendRequests: {
                        incoming: [],
                        sent: []
                    },
                    blocked: [],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                // Save the default data to create the file
                await this.saveFriendData(email, defaultData);
                return defaultData;
            }
            console.error('Error getting friend data:', error);
            throw error;
        }
    }

    async saveFriendData(email, data) {
        try {
            const filename = this.generateFilename(email);
            const fileRef = this.storageRef.child(filename);
            
            data.updatedAt = new Date().toISOString();
            
            const blob = new Blob([JSON.stringify(data, null, 2)], {
                type: 'application/json'
            });
            
            await fileRef.put(blob);
            return true;
        } catch (error) {
            console.error('Error saving friend data:', error);
            throw error;
        }
    }

    async initializeFriendData(email) {
        try {
            // Check if friend data already exists
            const existingData = await this.getFriendData(email);
            return existingData;
        } catch (error) {
            // If there's any error, create new friend data
            const defaultData = {
                email: email,
                friends: [],
                friendRequests: {
                    incoming: [],
                    sent: []
                },
                blocked: [],
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            await this.saveFriendData(email, defaultData);
            return defaultData;
        }
    }

    async sendFriendRequest(fromEmail, toEmail, toUsername) {
        try {
            // Initialize friend data for both users if they don't exist
            const senderData = await this.initializeFriendData(fromEmail);
            const receiverData = await this.initializeFriendData(toEmail);
            
            const senderUsername = await usernameManager.getUsername(fromEmail);
            
            // Check if already friends or request exists
            if (senderData.friends.some(f => f.email === toEmail)) {
                throw new Error('Already friends');
            }
            
            if (senderData.friendRequests.sent.some(r => r.email === toEmail)) {
                throw new Error('Friend request already sent');
            }
            
            if (receiverData.friendRequests.incoming.some(r => r.email === fromEmail)) {
                throw new Error('Friend request already exists');
            }
            
            // Check if the receiver has blocked the sender
            if (receiverData.blocked.some(b => b.email === fromEmail)) {
                throw new Error('Cannot send friend request to this user');
            }
            
            // Add to sender's sent requests
            senderData.friendRequests.sent.push({
                email: toEmail,
                username: toUsername,
                sentAt: new Date().toISOString()
            });
            
            // Add to receiver's incoming requests
            receiverData.friendRequests.incoming.push({
                email: fromEmail,
                username: senderUsername || fromEmail.split('@')[0],
                receivedAt: new Date().toISOString()
            });
            
            // Save both
            await this.saveFriendData(fromEmail, senderData);
            await this.saveFriendData(toEmail, receiverData);
            
            return true;
        } catch (error) {
            console.error('Error sending friend request:', error);
            throw error;
        }
    }

    async acceptFriendRequest(userEmail, friendEmail) {
        try {
            const userData = await this.initializeFriendData(userEmail);
            const friendData = await this.initializeFriendData(friendEmail);
            
            const friendUsername = await usernameManager.getUsername(friendEmail);
            const userUsername = await usernameManager.getUsername(userEmail);
            
            // Remove from incoming requests
            userData.friendRequests.incoming = userData.friendRequests.incoming.filter(r => r.email !== friendEmail);
            
            // Remove from friend's sent requests
            friendData.friendRequests.sent = friendData.friendRequests.sent.filter(r => r.email !== userEmail);
            
            // Add to both friends lists
            userData.friends.push({
                email: friendEmail,
                username: friendUsername || friendEmail.split('@')[0],
                friendSince: new Date().toISOString()
            });
            
            friendData.friends.push({
                email: userEmail,
                username: userUsername || userEmail.split('@')[0],
                friendSince: new Date().toISOString()
            });
            
            // Save both
            await this.saveFriendData(userEmail, userData);
            await this.saveFriendData(friendEmail, friendData);
            
            return true;
        } catch (error) {
            console.error('Error accepting friend request:', error);
            throw error;
        }
    }

    async declineFriendRequest(userEmail, friendEmail) {
        try {
            const userData = await this.initializeFriendData(userEmail);
            const friendData = await this.initializeFriendData(friendEmail);
            
            // Remove from incoming requests
            userData.friendRequests.incoming = userData.friendRequests.incoming.filter(r => r.email !== friendEmail);
            
            // Remove from friend's sent requests
            friendData.friendRequests.sent = friendData.friendRequests.sent.filter(r => r.email !== userEmail);
            
            // Save both
            await this.saveFriendData(userEmail, userData);
            await this.saveFriendData(friendEmail, friendData);
            
            return true;
        } catch (error) {
            console.error('Error declining friend request:', error);
            throw error;
        }
    }

    async blockUser(userEmail, blockEmail) {
        try {
            const userData = await this.initializeFriendData(userEmail);
            const blockUsername = await usernameManager.getUsername(blockEmail);
            
            // Remove from friends if they are friends
            userData.friends = userData.friends.filter(f => f.email !== blockEmail);
            
            // Remove any pending requests
            userData.friendRequests.incoming = userData.friendRequests.incoming.filter(r => r.email !== blockEmail);
            userData.friendRequests.sent = userData.friendRequests.sent.filter(r => r.email !== blockEmail);
            
            // Add to blocked list if not already blocked
            if (!userData.blocked.some(b => b.email === blockEmail)) {
                userData.blocked.push({
                    email: blockEmail,
                    username: blockUsername || blockEmail.split('@')[0],
                    blockedAt: new Date().toISOString()
                });
            }
            
            await this.saveFriendData(userEmail, userData);
            return true;
        } catch (error) {
            console.error('Error blocking user:', error);
            throw error;
        }
    }

    async unblockUser(userEmail, unblockEmail) {
        try {
            const userData = await this.initializeFriendData(userEmail);
            
            // Remove from blocked list
            userData.blocked = userData.blocked.filter(b => b.email !== unblockEmail);
            
            await this.saveFriendData(userEmail, userData);
            return true;
        } catch (error) {
            console.error('Error unblocking user:', error);
            throw error;
        }
    }

    async cancelFriendRequest(userEmail, targetEmail) {
        try {
            const userData = await this.initializeFriendData(userEmail);
            const targetData = await this.initializeFriendData(targetEmail);
            
            // Remove from user's sent requests
            userData.friendRequests.sent = userData.friendRequests.sent.filter(r => r.email !== targetEmail);
            
            // Remove from target's incoming requests
            targetData.friendRequests.incoming = targetData.friendRequests.incoming.filter(r => r.email !== userEmail);
            
            // Save both
            await this.saveFriendData(userEmail, userData);
            await this.saveFriendData(targetEmail, targetData);
            
            return true;
        } catch (error) {
            console.error('Error canceling friend request:', error);
            throw error;
        }
    }
}

// Initialize managers
const usernameManager = new UsernameManager();
const friendManager = new FriendManager();

// Particle system
function createParticles() {
    const particlesContainer = document.getElementById('particles');
    const particleCount = 50;

    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 8 + 's';
        particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
        particlesContainer.appendChild(particle);
    }
}

// Modal functionality
const modals = {
    login: document.getElementById('login-modal'),
    signup: document.getElementById('signup-modal'),
    username: document.getElementById('username-modal'),
    profile: document.getElementById('profile-modal')
};

function openModal(modalName) {
    closeAllModals();
    if (modals[modalName]) {
        modals[modalName].classList.add('active');
        document.body.style.overflow = 'hidden';
    }
}

function closeModal(modalName) {
    if (modals[modalName]) {
        modals[modalName].classList.remove('active');
        document.body.style.overflow = '';
    }
}

function closeAllModals() {
    Object.values(modals).forEach(modal => {
        modal.classList.remove('active');
    });
    document.body.style.overflow = '';
}

// Navigation functionality
function switchTab(tabName) {
    // Remove active class from all content sections
    document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
    });
    
    // Activate the selected section
    const activeSection = document.getElementById(`${tabName}-section`);
    if (activeSection) activeSection.classList.add('active');
}

// Community tab functionality
function switchCommunityTab(tabName) {
    document.querySelectorAll('.community-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    
    document.querySelectorAll('.community-tab-panel').forEach(panel => {
        panel.classList.remove('active');
    });
    
    const activeTab = document.querySelector(`.community-tab[data-tab="${tabName}"]`);
    const activePanel = document.getElementById(`${tabName}-panel`);
    
    if (activeTab) activeTab.classList.add('active');
    if (activePanel) activePanel.classList.add('active');
}

// Profile tab functionality
function switchProfileTab(tabName) {
    // Remove active class from all nav links
    document.querySelectorAll('.profile-nav-link').forEach(link => {
        link.classList.remove('active');
    });
    
    // Hide all tab panels
    document.querySelectorAll('.profile-tab-panel').forEach(panel => {
        panel.classList.remove('active');
    });
    
    // Activate the selected tab
    const activeLink = document.querySelector(`[data-tab="${tabName}"]`);
    const activePanel = document.getElementById(`${tabName}-panel`);
    
    if (activeLink) activeLink.classList.add('active');
    if (activePanel) activePanel.classList.add('active');
}

// Toast notification
function showToast(message) {
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toast-message');
    
    toastMessage.textContent = message;
    toast.classList.add('show');
    
    setTimeout(() => {
        toast.classList.remove('show');
    }, 3000);
}

// Error message display
function showError(elementId, message) {
    const errorElement = document.getElementById(elementId);
    if (errorElement) {
        errorElement.textContent = message;
        errorElement.style.display = 'block';
        setTimeout(() => {
            errorElement.style.display = 'none';
        }, 5000);
    }
}

// Update user display
async function updateUserDisplay(user) {
    const welcomeTitle = document.getElementById('welcome-title');
    const profileDisplayName = document.getElementById('profile-display-name');
    const profileEmail = document.getElementById('profile-email');
    const profileAvatar = document.getElementById('profile-avatar');
    const memberSinceDate = document.getElementById('member-since-date');
    
    if (user) {
        try {
            const userData = await usernameManager.getUserData(user.email);
            const username = userData?.username || user.displayName || user.email.split('@')[0];
            const initial = username.charAt(0).toUpperCase();
            
            // Update welcome message with translation
            const welcomeText = translateText('welcome_back', currentLanguage);
            welcomeTitle.textContent = welcomeText.replace('[Username]', username);
            
            profileDisplayName.textContent = username;
            profileEmail.textContent = user.email;
            profileAvatar.textContent = initial;
            
            // Update member since date with actual creation date
            if (userData?.createdAt) {
                memberSinceDate.textContent = formatDate(userData.createdAt);
            } else {
                memberSinceDate.textContent = 'Unknown';
            }
            
            if (user.photoURL) {
                profileAvatar.innerHTML = `<img src="${user.photoURL}" alt="Profile">`;
            }
            
            // Load friend data
            await loadFriendData(user.email);
        } catch (error) {
            console.error('Error updating user display:', error);
            const fallbackName = user.displayName || user.email.split('@')[0];
            const welcomeText = translateText('welcome_back', currentLanguage);
            welcomeTitle.textContent = welcomeText.replace('[Username]', fallbackName);
            profileDisplayName.textContent = fallbackName;
            profileEmail.textContent = user.email;
            profileAvatar.textContent = fallbackName.charAt(0).toUpperCase();
            memberSinceDate.textContent = 'Unknown';
        }
    } else {
        const welcomeText = translateText('welcome_back', currentLanguage);
        welcomeTitle.textContent = welcomeText;
        profileDisplayName.textContent = 'Guest';
        profileEmail.textContent = 'guest@example.com';
        profileAvatar.textContent = 'G';
        memberSinceDate.textContent = 'Unknown';
    }
}

// Load friend data
async function loadFriendData(userEmail) {
    try {
        const friendData = await friendManager.getFriendData(userEmail);
        
        // Update friends list
        updateFriendsList(friendData.friends);
        
        // Update friend requests
        updateFriendRequests(friendData.friendRequests);
        
        // Update blocked users
        updateBlockedUsers(friendData.blocked);
        
        // Update friends count in profile
        const friendsCount = document.getElementById('friends-count');
        if (friendsCount) {
            friendsCount.textContent = friendData.friends.length;
        }
        
    } catch (error) {
        console.error('Error loading friend data:', error);
    }
}

// Update friends list
function updateFriendsList(friends) {
    const friendsList = document.getElementById('friends-list');
    
    if (friends.length === 0) {
        friendsList.innerHTML = `
            <div class="empty-state">
                <svg class="empty-icon" viewBox="0 0 24 24">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                <h4 class="empty-title" data-translate="no_friends_yet">${translateText('no_friends_yet')}</h4>
                <p class="empty-description" data-translate="add_friends_description">${translateText('add_friends_description')}</p>
            </div>
        `;
        return;
    }
    
    friendsList.innerHTML = friends.map(friend => `
        <div class="friend-item" onclick="showUserProfile('${friend.email}', '${friend.username}')">
            <div class="friend-avatar">${friend.username.charAt(0).toUpperCase()}</div>
            <div class="friend-info">
                <div class="friend-name">${friend.username}</div>
                <div class="friend-status online">Online</div>
            </div>
        </div>
    `).join('');
}

// Update friend requests
function updateFriendRequests(requests) {
    const incomingContainer = document.getElementById('incoming-requests');
    const sentContainer = document.getElementById('sent-requests');
    
    // Incoming requests
    if (requests.incoming.length === 0) {
        incomingContainer.innerHTML = `
            <div class="empty-state">
                <svg class="empty-icon" viewBox="0 0 24 24">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                <h4 class="empty-title">${translateText('no_friend_requests')}</h4>
                <p class="empty-description">${translateText('no_pending_requests')}</p>
            </div>
        `;
    } else {
        incomingContainer.innerHTML = requests.incoming.map(request => `
            <div class="friend-request-item">
                <div class="friend-avatar">${request.username.charAt(0).toUpperCase()}</div>
                <div class="friend-request-info">
                    <div class="friend-request-name">${request.username}</div>
                    <div class="friend-request-time">${formatDate(request.receivedAt)}</div>
                </div>
                <div class="friend-request-actions">
                    <button class="action-btn accept-btn" onclick="acceptFriendRequest('${request.email}')">${translateText('accept', currentLanguage) || 'Accept'}</button>
                    <button class="action-btn decline-btn" onclick="declineFriendRequest('${request.email}')">${translateText('decline', currentLanguage) || 'Decline'}</button>
                </div>
            </div>
        `).join('');
    }
    
    // Sent requests
    if (requests.sent.length === 0) {
        sentContainer.innerHTML = `
            <div class="empty-state">
                <svg class="empty-icon" viewBox="0 0 24 24">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                <h4 class="empty-title">${translateText('no_sent_requests')}</h4>
                <p class="empty-description">${translateText('no_sent_requests_description')}</p>
            </div>
        `;
    } else {
        sentContainer.innerHTML = requests.sent.map(request => `
            <div class="friend-request-item">
                <div class="friend-avatar">${request.username.charAt(0).toUpperCase()}</div>
                <div class="friend-request-info">
                    <div class="friend-request-name">${request.username}</div>
                    <div class="friend-request-time">Sent ${formatDate(request.sentAt)}</div>
                </div>
                <div class="friend-request-actions">
                    <button class="action-btn decline-btn" onclick="cancelFriendRequest('${request.email}')">${translateText('cancel', currentLanguage) || 'Cancel'}</button>
                </div>
            </div>
        `).join('');
    }
}

// Update blocked users
function updateBlockedUsers(blocked) {
    const blockedContainer = document.getElementById('blocked-users');
    
    if (blocked.length === 0) {
        blockedContainer.innerHTML = `
            <div class="empty-state">
                <svg class="empty-icon" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>
                </svg>
                <h4 class="empty-title">${translateText('no_blocked_users')}</h4>
                <p class="empty-description">${translateText('no_blocked_description')}</p>
            </div>
        `;
        return;
    }
    
    blockedContainer.innerHTML = blocked.map(user => `
        <div class="user-result">
            <div class="user-result-avatar">${user.username.charAt(0).toUpperCase()}</div>
            <div class="user-result-info">
                <div class="user-result-name">${user.username}</div>
                <div class="user-result-email">Blocked ${formatDate(user.blockedAt)}</div>
            </div>
            <div class="user-result-actions">
                <button class="action-btn view-profile-btn" onclick="unblockUser('${user.email}')">${translateText('unblock', currentLanguage) || 'Unblock'}</button>
            </div>
        </div>
    `).join('');
}

// Search users
async function searchUsers(query) {
    if (query.length < 2) {
        document.getElementById('search-results').innerHTML = `
            <div class="empty-state">
                <svg class="empty-icon" viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="M21 21l-4.35-4.35"></path>
                </svg>
                <h4 class="empty-title">${translateText('search_for_users')}</h4>
                <p class="empty-description">${translateText('search_description')}</p>
            </div>
        `;
        return;
    }
    
    try {
        const results = await usernameManager.searchUsers(query);
        const currentUser = auth.currentUser;
        
        if (results.length === 0) {
            document.getElementById('search-results').innerHTML = `
                <div class="empty-state">
                    <svg class="empty-icon" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="M21 21l-4.35-4.35"></path>
                    </svg>
                    <h4 class="empty-title">No Users Found</h4>
                    <p class="empty-description">No users found matching "${query}"</p>
                </div>
            `;
            return;
        }
        
        // Filter out current user
        const filteredResults = results.filter(user => user.email !== currentUser?.email);
        
        document.getElementById('search-results').innerHTML = filteredResults.map(user => `
            <div class="user-result">
                <div class="user-result-avatar">${user.username.charAt(0).toUpperCase()}</div>
                <div class="user-result-info">
                    <div class="user-result-name">${user.username}</div>
                    <div class="user-result-email">${user.email}</div>
                </div>
                <div class="user-result-actions">
                    <button class="action-btn friend-request-btn" onclick="sendFriendRequest('${user.email}', '${user.username}')">${translateText('add_friend')}</button>
                    <button class="action-btn view-profile-btn" onclick="showUserProfile('${user.email}', '${user.username}')">${translateText('view_profile', currentLanguage) || 'View Profile'}</button>
                    <button class="action-btn block-btn" onclick="blockUser('${user.email}')">${translateText('block', currentLanguage) || 'Block'}</button>
                </div>
            </div>
        `).join('');
        
    } catch (error) {
        console.error('Error searching users:', error);
        showToast('Error searching users');
    }
}

// Friend management functions
async function sendFriendRequest(toEmail, toUsername) {
    const currentUser = auth.currentUser;
    if (!currentUser) return;
    
    try {
        await friendManager.sendFriendRequest(currentUser.email, toEmail, toUsername);
        showToast(translateText('friend_request_sent', currentLanguage) || 'Friend request sent!');
        await loadFriendData(currentUser.email);
    } catch (error) {
        console.error('Error sending friend request:', error);
        showToast(error.message || 'Error sending friend request');
    }
}

async function acceptFriendRequest(friendEmail) {
    const currentUser = auth.currentUser;
    if (!currentUser) return;
    
    try {
        await friendManager.acceptFriendRequest(currentUser.email, friendEmail);
        showToast(translateText('friend_request_accepted', currentLanguage) || 'Friend request accepted!');
        await loadFriendData(currentUser.email);
    } catch (error) {
        console.error('Error accepting friend request:', error);
        showToast('Error accepting friend request');
    }
}

async function declineFriendRequest(friendEmail) {
    const currentUser = auth.currentUser;
    if (!currentUser) return;
    
    try {
        await friendManager.declineFriendRequest(currentUser.email, friendEmail);
        showToast(translateText('friend_request_declined', currentLanguage) || 'Friend request declined');
        await loadFriendData(currentUser.email);
    } catch (error) {
        console.error('Error declining friend request:', error);
        showToast('Error declining friend request');
    }
}

async function cancelFriendRequest(targetEmail) {
    const currentUser = auth.currentUser;
    if (!currentUser) return;
    
    try {
        await friendManager.cancelFriendRequest(currentUser.email, targetEmail);
        showToast(translateText('friend_request_canceled', currentLanguage) || 'Friend request canceled');
        await loadFriendData(currentUser.email);
    } catch (error) {
        console.error('Error canceling friend request:', error);
        showToast('Error canceling friend request');
    }
}

async function blockUser(blockEmail) {
    const currentUser = auth.currentUser;
    if (!currentUser) return;
    
    try {
        await friendManager.blockUser(currentUser.email, blockEmail);
        showToast(translateText('user_blocked', currentLanguage) || 'User blocked');
        await loadFriendData(currentUser.email);
    } catch (error) {
        console.error('Error blocking user:', error);
        showToast('Error blocking user');
    }
}

async function unblockUser(unblockEmail) {
    const currentUser = auth.currentUser;
    if (!currentUser) return;
    
    try {
        await friendManager.unblockUser(currentUser.email, unblockEmail);
        showToast(translateText('user_unblocked', currentLanguage) || 'User unblocked');
        await loadFriendData(currentUser.email);
    } catch (error) {
        console.error('Error unblocking user:', error);
        showToast('Error unblocking user');
    }
}

// Show user profile
async function showUserProfile(email, username) {
    const modal = document.getElementById('profile-modal');
    const title = document.getElementById('profile-modal-title');
    const avatar = document.getElementById('profile-modal-avatar');
    const usernameEl = document.getElementById('profile-modal-username');
    const emailEl = document.getElementById('profile-modal-email');
    const joinedEl = document.getElementById('profile-modal-joined');
    const actionsEl = document.getElementById('profile-actions');
    
    title.textContent = `${username}'s Profile`;
    avatar.textContent = username.charAt(0).toUpperCase();
    usernameEl.textContent = username;
    emailEl.textContent = email;
    
    try {
        // Get user data to show actual join date
        const userData = await usernameManager.getUserData(email);
        if (userData?.createdAt) {
            joinedEl.textContent = `${translateText('joined')}: ${formatDate(userData.createdAt)}`;
        } else {
            joinedEl.textContent = `${translateText('joined')}: Unknown`;
        }
    } catch (error) {
        console.error('Error getting user data:', error);
        joinedEl.textContent = `${translateText('joined')}: Unknown`;
    }
    
    // Add action buttons
    actionsEl.innerHTML = `
        <button class="action-btn friend-request-btn" onclick="sendFriendRequest('${email}', '${username}'); closeModal('profile')">${translateText('add_friend')}</button>
        <button class="action-btn block-btn" onclick="blockUser('${email}'); closeModal('profile')">${translateText('block_user', currentLanguage) || 'Block User'}</button>
    `;
    
    openModal('profile');
}

// Username validation and availability checking
async function checkUsernameAvailability(username) {
    const availabilityDiv = document.getElementById('username-availability');
    const saveBtn = document.getElementById('username-save-btn');
    
    if (username.length < 3) {
        availabilityDiv.className = 'username-availability';
        saveBtn.disabled = true;
        return;
    }
    
    // Show checking state
    availabilityDiv.className = 'username-availability checking';
    availabilityDiv.textContent = translateText('checking_availability', currentLanguage) || 'Checking availability...';
    saveBtn.disabled = true;
    
    try {
        const isAvailable = await usernameManager.checkUsernameAvailability(username);
        
        if (isAvailable) {
            availabilityDiv.className = 'username-availability available';
            availabilityDiv.textContent = translateText('username_available', currentLanguage) || 'Username is available!';
            saveBtn.disabled = false;
        } else {
            availabilityDiv.className = 'username-availability taken';
            availabilityDiv.textContent = translateText('username_taken', currentLanguage) || 'Username is already taken';
            saveBtn.disabled = true;
        }
    } catch (error) {
        console.error('Error checking username availability:', error);
        availabilityDiv.className = 'username-availability taken';
        availabilityDiv.textContent = translateText('error_checking', currentLanguage) || 'Error checking availability';
        saveBtn.disabled = true;
    }
}

// Language selector functionality
document.addEventListener('DOMContentLoaded', function() {
    const languageToggle = document.getElementById('language-toggle');
    const languageOptions = document.getElementById('language-options');

    languageToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        languageOptions.classList.toggle('active');
    });

    document.addEventListener('click', function() {
        languageOptions.classList.remove('active');
    });

    document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            const flagSrc = this.querySelector('.language-flag').src;
            const langName = this.querySelector('span').textContent;
            
            // Update current language
            currentLanguage = lang;
            
            // Update language selector display
            document.getElementById('current-language-flag').src = flagSrc;
            document.getElementById('current-language-name').textContent = langName.substring(0, 2).toUpperCase();
            
            // Apply translations
            applyTranslations(lang);
            
            // Update user display if logged in
            const currentUser = auth.currentUser;
            if (currentUser) {
                updateUserDisplay(currentUser);
            }
            
            languageOptions.classList.remove('active');
            showToast(`${translateText('language_changed')} ${langName}`);
        });
    });
});

// Initialize particles
createParticles();

// Event listeners
document.addEventListener('DOMContentLoaded', function() {
    // Apply initial translations
    applyTranslations();
    
    // Modal close buttons
    document.querySelectorAll('.modal-close, .profile-modal-close').forEach(button => {
        button.addEventListener('click', function() {
            closeAllModals();
        });
    });
    
    // Modal overlay clicks
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
        overlay.addEventListener('click', function(e) {
            if (e.target === this) {
                closeAllModals();
            }
        });
    });
    
    // Navigation menu clicks
    document.querySelectorAll('.menu-link-front').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const tabName = this.getAttribute('data-tab');
            if (tabName) {
                switchTab(tabName);
            }
        });
    });
    
    // Profile button
    document.getElementById('profile-button').addEventListener('click', function(e) {
        e.preventDefault();
        const user = auth.currentUser;
        if (user) {
            openModal('login');
            document.getElementById('login-view').style.display = 'none';
            document.getElementById('profile-view').style.display = 'block';
        } else {
            openModal('login');
        }
    });
    
    // Community tabs
    document.querySelectorAll('.community-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            const tabName = this.getAttribute('data-tab');
            switchCommunityTab(tabName);
        });
    });
    
    // Profile navigation
    document.querySelectorAll('.profile-nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const tabName = this.getAttribute('data-tab');
            switchProfileTab(tabName);
        });
    });
    
    // Auth form switches
    document.getElementById('show-signup').addEventListener('click', function() {
        closeModal('login');
        openModal('signup');
    });
    
    document.getElementById('show-login').addEventListener('click', function() {
        closeModal('signup');
        openModal('login');
    });
    
    // Username edit functionality
    document.getElementById('username-edit-btn').addEventListener('click', function() {
        openModal('username');
        const currentUsername = document.getElementById('profile-display-name').textContent;
        document.getElementById('username-input').value = currentUsername;
    });
    
    // Username input validation
    document.getElementById('username-input').addEventListener('input', function() {
        const username = this.value.trim();
        const regex = /^[a-zA-Z0-9_]{3,20}$/;
        
        if (username.length >= 3 && regex.test(username)) {
            checkUsernameAvailability(username);
        } else {
            const availabilityDiv = document.getElementById('username-availability');
            const saveBtn = document.getElementById('username-save-btn');
            availabilityDiv.className = 'username-availability';
            saveBtn.disabled = true;
        }
    });
    
    // Username form submission
    document.getElementById('username-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        const user = auth.currentUser;
        const username = document.getElementById('username-input').value.trim();
        
        if (!user) return;
        
        try {
            const saveBtn = document.getElementById('username-save-btn');
            saveBtn.classList.add('loading');
            saveBtn.disabled = true;
            
            await usernameManager.updateUsername(user.email, username);
            
            // Update profile display
            document.getElementById('profile-display-name').textContent = username;
            const welcomeText = translateText('welcome_back', currentLanguage);
            document.getElementById('welcome-title').textContent = welcomeText.replace('[Username]', username);
            
            showToast(translateText('username_saved', currentLanguage) || 'Username saved successfully!');
            closeModal('username');
            
        } catch (error) {
            console.error('Error saving username:', error);
            showError('username-error', 'Failed to save username. Please try again.');
        } finally {
            const saveBtn = document.getElementById('username-save-btn');
            saveBtn.classList.remove('loading');
        }
    });
    
    // User search
    document.getElementById('user-search-input').addEventListener('input', function() {
        const query = this.value.trim();
        searchUsers(query);
    });
    
    // Logout functionality
    document.getElementById('logout-button').addEventListener('click', async function() {
        try {
            await auth.signOut();
            closeAllModals();
            showToast(translateText('logged_out', currentLanguage) || 'Logged out successfully');
        } catch (error) {
            console.error('Error signing out:', error);
        }
    });
    
    // Google Sign-In
    document.getElementById('google-signin-btn').addEventListener('click', async function() {
        try {
            const result = await auth.signInWithPopup(googleProvider);
            const user = result.user;
            
            showToast(translateText('signed_in_google', currentLanguage) || 'Successfully signed in with Google');
            closeModal('login');
            
            await updateUserDisplay(user);
            
        } catch (error) {
            console.error('Google sign-in error:', error);
            showError('login-error', 'Google sign-in failed. Please try again.');
        }
    });
    
    // Google Sign-Up
    document.getElementById('google-signup-btn').addEventListener('click', async function() {
        try {
            const result = await auth.signInWithPopup(googleProvider);
            const user = result.user;
            
            showToast(translateText('account_created_google', currentLanguage) || 'Account created successfully with Google');
            closeModal('signup');
            
            await updateUserDisplay(user);
            
        } catch (error) {
            console.error('Google sign-up error:', error);
            showError('signup-error', 'Google sign-up failed. Please try again.');
        }
    });
    
    // Regular login form
    document.getElementById('login-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        
        try {
            const userCredential = await auth.signInWithEmailAndPassword(email, password);
            const user = userCredential.user;
            
            showToast(translateText('logged_in_success', currentLanguage) || 'Logged in successfully');
            closeModal('login');
            
            await updateUserDisplay(user);
            
        } catch (error) {
            console.error('Login error:', error);
            showError('login-error', 'Invalid email or password');
        }
    });
    
    // Regular signup form
    document.getElementById('signup-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        const confirmPassword = document.getElementById('confirm-password').value;
        
        if (password !== confirmPassword) {
            showError('signup-error', 'Passwords do not match');
            return;
        }
        
        try {
            const userCredential = await auth.createUserWithEmailAndPassword(email, password);
            const user = userCredential.user;
            
            showToast(translateText('account_created_success', currentLanguage) || 'Account created successfully');
            closeModal('signup');
            
            await updateUserDisplay(user);
            
        } catch (error) {
            console.error('Signup error:', error);
            showError('signup-error', error.message);
        }
    });
});

// Auth state observer
auth.onAuthStateChanged(async function(user) {
    await updateUserDisplay(user);
});

// Make functions globally available
window.sendFriendRequest = sendFriendRequest;
window.acceptFriendRequest = acceptFriendRequest;
window.declineFriendRequest = declineFriendRequest;
window.cancelFriendRequest = cancelFriendRequest;
window.blockUser = blockUser;
window.unblockUser = unblockUser;
window.showUserProfile = showUserProfile;
</script>

<script
data-name="BMC-Widget" 
data-cfasync="false"
src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js"
data-id="anemunt"
data-description="Support me on Buy me a coffee!"
data-message="Feel Free to donate to Anemunt and the LLC. If you'd like or buy one of My Assets, It's in the link below in the Widget!"
data-color="#BD5FFF"
data-position="Right"
data-x_margin="18"
data-y_margin="18">
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const closeBtn = document.getElementById("announcement-close");
    const banner = document.getElementById("announcement-banner");

    closeBtn.addEventListener("click", () => {
        banner.classList.add("hidden");
        setTimeout(() => banner.style.display = "none", 300);
    });
});
</script>

</body>
</html>
